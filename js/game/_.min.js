"use strict";var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(h=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(h=h.call(o,n[1])).done)return h;switch(o=0,h&&(n=[0,h.value]),n[0]){case 0:case 1:h=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(h=u.trys,!(h=h.length>0&&h[h.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!h||n[1]>h[0]&&n[1]<h[3])){u.label=n[1];break}if(6===n[0]&&u.label<h[1]){u.label=h[1],h=n;break}if(h&&u.label<h[2]){u.label=h[2],u.ops.push(n);break}h[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(r){n=[6,r],o=0}finally{i=h=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,h,s,u={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__read=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),h=[];try{for(;(void 0===e||e-->0)&&!(r=o.next()).done;)h.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return h},__spread=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t},__values=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},http;!function(t){var e=function(){function t(t,e){void 0===e&&(e=2e4),this.autoTip=!1,this.instance=axios.create({baseURL:null==t?"":t,timeout:e,headers:{"X-Requested-With":"XMLHttpRequest"},responseType:"json",xsrfHeaderName:"X-CSRF-TOKEN",xsrfCookieName:"XSRF-TOKEN",transformRequest:[function(t,e){return t}]})}return t.prototype.request=function(t,e,n){void 0===n&&(n={});var r="get"==t.toLowerCase()?n:{};return"get"==t.toLowerCase()&&(n=null),this.instance.request({method:t.toLowerCase(),url:e,params:r,data:n})},t}();t.Query=e,__reflect(e.prototype,"http.Query")}(http||(http={}));var array;!function(t){function e(t){return Array.from(new Set(t))}function n(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=__spread(t),o=function(t){i=i.filter(function(e){return t.includes(e)})};try{for(var h=__values(n),s=h.next();!s.done;s=h.next()){var u=s.value;o(u)}}catch(a){c={error:a}}finally{try{s&&!s.done&&(f=h["return"])&&f.call(h)}finally{if(c)throw c.error}}return e(i);var c,f}function r(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=__spread(t),o=function(t){i=i.filter(function(e){return!t.includes(e)})};try{for(var h=__values(n),s=h.next();!s.done;s=h.next()){var u=s.value;o(u)}}catch(a){c={error:a}}finally{try{s&&!s.done&&(f=h["return"])&&f.call(h)}finally{if(c)throw c.error}}return e(i);var c,f}function i(t,e,n){void 0===n&&(n=1);var r;return __generator(this,function(i){switch(i.label){case 0:if(null==e&&(e=t,t=0),r=t,!(0>n))return[3,4];i.label=1;case 1:return r>e?[4,r]:[3,3];case 2:return i.sent(),r+=n,[3,1];case 3:return[3,6];case 4:return e>r?[4,r]:[3,6];case 5:return i.sent(),r+=n,[3,4];case 6:return[2]}})}t.unique=e,t.intersect=n,t.diff=r,t.xrange=i}(array||(array={}));var array;!function(t){var e=function(){function t(t,e){this.rows=t,this.cols=e}return Object.defineProperty(t.prototype,"size",{get:function(){return this.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.cols*this.rows},enumerable:!0,configurable:!0}),t.prototype.row=function(t){return~~(t/this.cols)},t.prototype.col=function(t){return t%this.cols},t.prototype.index=function(t,e){return t*this.cols+e},t.prototype.indices=function(){return _.range(0,this.size)},t.prototype.rowIndices=function(t){var e=[];try{for(var n=__values(this.colsEntries()),r=n.next();!r.done;r=n.next()){var i=r.value;e.push(this.index(t,i))}}catch(o){h={error:o}}finally{try{r&&!r.done&&(s=n["return"])&&s.call(n)}finally{if(h)throw h.error}}return e;var h,s},t.prototype.colIndices=function(t){var e=[];try{for(var n=__values(this.rowsEntries()),r=n.next();!r.done;r=n.next()){var i=r.value;e.push(this.index(i,t))}}catch(o){h={error:o}}finally{try{r&&!r.done&&(s=n["return"])&&s.call(n)}finally{if(h)throw h.error}}return e;var h,s},t.prototype.crossIndices=function(t,e){var n=t;null==e&&(n=this.row(t),e=this.col(t));var r=[].concat(this.rowIndices(n),this.colIndices(e));return _.uniq(r)},t.prototype.rowsEntries=function(t){return void 0===t&&(t=1),__generator(this,function(e){switch(e.label){case 0:return[5,__values(t>0?_.range(0,this.rows,Math.abs(t)):_.rangeRight(0,this.rows,Math.abs(t)))];case 1:return e.sent(),[2]}})},t.prototype.colsEntries=function(t){return void 0===t&&(t=1),__generator(this,function(e){switch(e.label){case 0:return[5,__values(t>0?_.range(0,this.cols,Math.abs(t)):_.rangeRight(0,this.cols,Math.abs(t)))];case 1:return e.sent(),[2]}})},t.prototype.indicesEntries=function(t){return void 0===t&&(t=1),__generator(this,function(e){switch(e.label){case 0:return[5,__values(t>0?_.range(0,this.size,Math.abs(t)):_.rangeRight(0,this.size,Math.abs(t)))];case 1:return e.sent(),[2]}})},t}();t.Grid=e,__reflect(e.prototype,"array.Grid")}(array||(array={}));var math;!function(t){function e(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e}function n(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)}function r(t,e){if(void 0===t&&(t=0),void 0===e&&(e=1),t===e)return t;if(t>e){var n=t;t=e,e=n}return Math.random()*(e-t)+t}function i(t,e){if(void 0===t&&(t=0),void 0===e&&(e=1),t===e)return t;if(t>e){var n=t;t=e,e=n}return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function o(t,e,n){return void 0===n&&(n=1e-4),Math.abs(t-e)<n}function h(t,e,n){return void 0===n&&(n=1e-4),e+n>t}function s(t,e,n){return void 0===n&&(n=1e-4),t>e-n}function u(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}function a(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,r=t.length,i=0;r>i;i++)n+=+t[i];return n/r}function f(t){return t%1}function y(t,e,n){return void 0===n&&(n=0),0===e?t:(t-=n,t=e*Math.round(t/e),n+t)}function p(t,e,n){return void 0===n&&(n=0),0===e?t:(t-=n,t=e*Math.floor(t/e),n+t)}function l(t,e,n){return void 0===n&&(n=0),0===e?t:(t-=n,t=e*Math.ceil(t/e),n+t)}function d(t,e,n){void 0===e&&(e=0),void 0===n&&(n=10);var r=Math.pow(n,-e);return Math.round(t*r)/r}function g(t,e,n){void 0===e&&(e=0),void 0===n&&(n=10);var r=Math.pow(n,-e);return Math.floor(t*r)/r}function x(t,e,n){void 0===e&&(e=0),void 0===n&&(n=10);var r=Math.pow(n,-e);return Math.ceil(t*r)/r}function m(t,e,n){return Math.min(t+e,n)}function v(t,e,n){return Math.max(t-e,n)}function b(t,e,n){var r=n-e;if(0>=r)return 0;var i=(t-e)%r;return 0>i&&(i+=r),i+e}function T(t,e,n){var r;return t=Math.abs(t),e=Math.abs(e),n=Math.abs(n),r=(t+e)%n}function w(t){return!!(1&t)}function M(t){return!(1&t)}function P(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t,r=0,i=n.length,o=1;i>o;o++)n[o]<n[r]&&(r=o);return n[r]}function O(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t,r=0,i=n.length,o=1;i>o;o++)n[o]>n[r]&&(r=o);return n[r]}function _(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e,i=0,o=r.length,h=1;o>h;h++)r[h][t]<r[i][t]&&(i=h);return r[i][t]}function E(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e,i=0,o=r.length,h=1;o>h;h++)r[h][t]>r[i][t]&&(i=h);return r[i][t]}function I(t,e){var n=t.length-1,r=n*e,i=Math.floor(r);return 0>e?S(t[0],t[1],r):e>1?S(t[n],t[n-1],n-r):S(t[i],t[i+1>n?n:i+1],r-i)}function R(t,e){for(var n=0,r=t.length-1,i=0;r>=i;i++)n+=Math.pow(1-e,r-i)*Math.pow(e,i)*t[i]*H(r,i);return n}function N(t,e){var n=t.length-1,r=n*e,i=Math.floor(r);return t[0]===t[n]?(0>e&&(i=Math.floor(r=n*(1+e))),j(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):0>e?t[0]-(j(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(j(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):j(t[i?i-1:0],t[i],t[i+1>n?n:i+1],t[i+2>n?n:i+2],r-i)}function S(t,e,n){return(e-t)*n+t}function H(t,e){return L(t)/L(e)/L(t-e)}function L(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}function j(t,e,n,r,i){var o=.5*(n-t),h=.5*(r-e),s=i*i,u=i*s;return(2*e-2*n+o+h)*u+(-3*e+3*n-2*o-h)*s+o*i+e}function q(t,e){return Math.abs(t-e)}function A(t){return t>0?Math.ceil(t):Math.floor(t)}function C(t,e,n,r){void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=1);for(var i=e,o=n,h=r*Math.PI/t,s=[],u=[],a=0;t>a;a++)o-=i*h,i+=o*h,s[a]=o,u[a]=i;return{sin:u,cos:s,length:t}}function z(t,e,n){return e>t?e:t>n?n:t}function F(t,e){return e>t?e:t}function W(t,e,n){return Math.abs(t-e)<=n}function B(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function D(t,e,n){return t=Math.max(0,Math.min(1,(t-e)/(n-e))),t*t*(3-2*t)}function G(t,e,n){return t=Math.max(0,Math.min(1,(t-e)/(n-e))),t*t*t*(t*(6*t-15)+10)}function Y(t){return 0>t?-1:t>0?1:0}function X(t,e,n){return void 0===n&&(n=0),t>e||n>e?1:n>t||n>t?0:(t-n)/e}t.getNextPowerOfTwo=e,t.isPowerOfTwo=n,t.random=r,t.between=i,t.fuzzyEquals=o,t.fuzzyLessThan=h,t.fuzzyGreaterThan=s,t.fuzzyCeil=u,t.fuzzyFloor=a,t.average=c,t.shear=f,t.snapTo=y,t.snapToFloor=p,t.snapToCeil=l,t.roundTo=d,t.floorTo=g,t.ceilTo=x,t.maxAdd=m,t.minSub=v,t.wrap=b,t.wrapValue=T,t.isOdd=w,t.isEven=M,t.min=P,t.max=O,t.minProperty=_,t.maxProperty=E,t.linearInterpolation=I,t.bezierInterpolation=R,t.catmullRomInterpolation=N,t.linear=S,t.bernstein=H,t.factorial=L,t.catmullRom=j,t.difference=q,t.roundAwayFromZero=A,t.sinCosGenerator=C,t.clamp=z,t.clampBottom=F,t.within=W,t.mapLinear=B,t.smoothstep=D,t.smootherstep=G,t.sign=Y,t.percent=X}(math||(math={}));var http;!function(t){function e(t){var e;if(t instanceof FormData)e=t;else{e=new FormData;for(var n in t)e.append(n,t[n])}return e}function n(e,n){var r=new t.Query;return r.request("get",e,n)}function r(e,n){var r=new t.Query;return r.request("post",e,n)}function i(n,r){var i=new t.Query;return i.request("post",n,e(r))}function o(e,n){var r=new t.Query;return r.request("head",e,n)}function h(e,n){var r=new t.Query;return r.request("options",e,n)}function s(e,n){var r=new t.Query;return r.request("patch",e,n)}function u(e,n){var r=new t.Query;return r.request("put",e,n)}function a(e,n){var r=new t.Query;return r.request("delete",e,n)}t.objectToForm=e,t.get=n,t.post=r,t.form=i,t.head=o,t.options=h,t.patch=s,t.put=u,t.DELETE=a,t["delete"]=a}(http||(http={}));var sharp;!function(t){var e=function(){function e(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.setTo(t,e,n,r)}return Object.defineProperty(e.prototype,"length",{get:function(){return this.start.distance(this.end)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.start.angle(this.end)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perpSlope",{get:function(){return-((this.end.x-this.start.x)/(this.end.y-this.start.y))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return Math.min(this.start.x,this.end.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return Math.min(this.start.y,this.end.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return Math.min(this.start.x,this.end.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return Math.max(this.start.x,this.end.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return Math.min(this.start.y,this.end.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return Math.max(this.start.y,this.end.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.start.x-this.end.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.start.y-this.end.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalX",{get:function(){return Math.cos(this.angle-1.5707963267948966)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalY",{get:function(){return Math.sin(this.angle-1.5707963267948966)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalAngle",{get:function(){return math.wrap(this.angle-1.5707963267948966,-Math.PI,Math.PI)},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.start,this.end)},e.create=function(t,n,r,i){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),new e(t,n,r,i)},e.prototype.setTo=function(e,n,r,i){var o=__read(t.optional2Points(e,n,r,i),2),h=o[0],s=o[1];return this.start=h.clone(),this.end=s.clone(),this},e.prototype.fromAngle=function(e,n,r){this.start.setTo(e),this.end=t.circlePoint(e,n,r)},e.prototype.rotate=function(t){var e=(this.start.x+this.end.x)/2,n=(this.start.y+this.end.y)/2;return this.start.rotate(e,n,t),this.end.rotate(e,n,t),this},e.prototype.rotateAround=function(t,e,n){return this.start.rotate(t,e,n),this.end.rotate(t,e,n),this},e.prototype.intersects=function(e,n){void 0===n&&(n=!0);var r=new t.Point,i=this.start,o=this.end,h=e.start,s=e.end,u=o.y-i.y,a=s.y-h.y,c=i.x-o.x,f=h.x-s.x,y=o.x*i.y-i.x*o.y,p=s.x*h.y-h.x*s.y,l=u*f-a*c;if(0===l)return!1;if(r.x=(c*p-f*y)/l,r.y=(a*y-u*p)/l,n){var d=(s.y-h.y)*(o.x-i.x)-(s.x-h.x)*(o.y-i.y),g=((s.x-h.x)*(i.y-h.y)-(s.y-h.y)*(i.x-h.x))/d,x=((o.x-i.x)*(i.y-h.y)-(o.y-i.y)*(i.x-h.x))/d;return g>=0&&1>=g&&x>=0&&1>=x?r:!1}return r},e.prototype.intersectsRectangle=function(t){if(0===this.length||t.empty)return!1;var e=this.start.x,n=this.start.y,r=this.end.x,i=this.end.y,o=t.x,h=t.y,s=t.right,u=t.bottom,a=0;if(e>=o&&s>=e&&n>=h&&u>=n||r>=o&&s>=r&&i>=h&&u>=i)return!0;if(o>e&&r>=o){if(a=n+(i-n)*(o-e)/(r-e),a>h&&u>=a)return!0}else if(e>s&&s>=r&&(a=n+(i-n)*(s-e)/(r-e),a>=h&&u>=a))return!0;if(h>n&&i>=h){if(a=e+(r-e)*(h-n)/(i-n),a>=o&&s>=a)return!0}else if(n>u&&u>=i&&(a=e+(r-e)*(u-n)/(i-n),a>=o&&s>=a))return!0;return!1},e.prototype.intersectionWithRectangle=function(e){var n,r=this,i=new t.Point,o=e.sides,h=1/0,s=null;return o.forEach(function(e){n=r.intersects(e,!0),n instanceof t.Point&&(s=r.start.distance(n),h>s&&(h=s,i.setTo(n)))}),null!=s?i:!1},e.prototype.reflect=function(t){return 2*t.normalAngle-3.141592653589793-this.angle},e.prototype.midPoint=function(){return new t.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},e.prototype.centerOn=function(t,e){var n=(this.start.x+this.end.x)/2,r=(this.start.y+this.end.y)/2,i=t-n,o=e-r;return this.start.add(i,o),this.end.add(i,o),this},e.prototype.pointOnLine=function(t,e,n){return void 0===n&&(n=0),math.fuzzyEquals((t-this.start.x)*(this.end.y-this.start.y),(this.end.x-this.start.x)*(e-this.start.y),n)},e.prototype.pointOnSegment=function(t,e,n){void 0===n&&(n=0);var r=Math.min(this.start.x,this.end.x),i=Math.max(this.start.x,this.end.x),o=Math.min(this.start.y,this.end.y),h=Math.max(this.start.y,this.end.y);return this.pointOnLine(t,e,n)&&t>=r&&i>=t&&e>=o&&h>=e},e.prototype.random=function(){var e=Math.random();return new t.Point(this.start.x+e*(this.end.x-this.start.x),this.start.y+e*(this.end.y-this.start.y))},e.prototype.coordinatesOnLine=function(e){void 0===e&&(e=1);var n=[],r=Math.round(this.start.x),i=Math.round(this.start.y),o=Math.round(this.end.x),h=Math.round(this.end.y),s=Math.abs(o-r),u=Math.abs(h-i),a=o>r?1:-1,c=h>i?1:-1,f=s-u;n.push(new t.Point(r,i));for(var y=1;r!==o||i!==h;){var p=f<<1;p>-u&&(f-=u,r+=a),s>p&&(f+=s,i+=c),y%e===0&&n.push(new t.Point(r,i)),y++}return n},e}();t.Line=e,__reflect(e.prototype,"sharp.Line")}(sharp||(sharp={}));var sharp;!function(t){var e=function(){function e(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.setTo(t,e)}return e.prototype.clone=function(){return new e(this.x,this.y)},e.create=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=0),new e(t,n)},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t},e.prototype.setTo=function(t,n){return t instanceof e?(this.x=t.x,this.y=t.y):(this.x=t,this.y=void 0==n?t:n),this},e.prototype.setToPolar=function(t,e){return void 0===e&&(e=1),this.setTo(Math.cos(t)*e,Math.sin(t)*e)},e.prototype.invert=function(){return this.setTo(this.y,this.x)},e.prototype.subtract=function(t,e){return this.x-=t,this.y-=e,this},e.prototype.add=function(t,e){return this.x+=t,this.y+=e,this},e.prototype.multiply=function(t,e){return this.x*=t,this.y*=e,this},e.prototype.divide=function(t,e){return this.x/=t,this.y/=e,this},e.prototype.clampX=function(t,e){return this.x=math.clamp(this.x,t,e),this},e.prototype.clampY=function(t,e){return this.y=math.clamp(this.y,t,e),this},e.prototype.clamp=function(t,e){return this.x=math.clamp(this.x,t,e),this.y=math.clamp(this.y,t,e),this},e.prototype.clip=function(t){var e=t.left,n=t.top,r=t.right,i=t.bottom;return this.x<e?this.x=e:this.x>r&&(this.x=r),this.y<n?this.y=n:this.y>i&&(this.y=i),this},e.prototype.distance=function(e,n){void 0===n&&(n=!1);var r=t.distance(this,e);return n?Math.round(r):r},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},e.prototype.equalsXY=function(t,e){return this.x===t&&this.y===e},e.prototype.fuzzyEquals=function(t,e){return void 0===e&&(e=1e-4),math.fuzzyEquals(this.x,t.x,e)&&math.fuzzyEquals(this.y,t.y,e)},e.prototype.fuzzyEqualsXY=function(t,n,r){return void 0===r&&(r=1e-4),this.fuzzyEquals(new e(t,n),r)},e.prototype.angle=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},e.prototype.rotate=function(t,e,n,r){if(null==r){this.subtract(t,e);var i=Math.sin(n),o=Math.cos(n),h=o*this.x-i*this.y,s=i*this.x+o*this.y;this.x=h+t,this.y=s+e}else{var u=n+Math.atan2(this.y-e,this.x-t);this.x=t+r*Math.cos(u),this.y=e+r*Math.sin(u)}return this},e.prototype.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.getMagnitudeSq=function(){return this.x*this.x+this.y*this.y},e.prototype.setMagnitude=function(t){return this.normalize().multiply(t,t)},e.prototype.normalize=function(){if(!this.isZero()){var t=this.getMagnitude();this.x/=t,this.y/=t}return this},e.prototype.limit=function(t){return this.getMagnitudeSq()>t*t&&this.setMagnitude(t),this},e.prototype.isZero=function(){return 0===this.x&&0===this.y},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.cross=function(t){return this.x*t.y-this.y*t.x},e.prototype.perp=function(){return this.setTo(-this.y,this.x)},e.prototype.rperp=function(){return this.setTo(this.y,-this.x)},e.prototype.normalRightHand=function(){return this.setTo(-1*this.y,this.x)},e.prototype.floor=function(){return this.setTo(Math.floor(this.x),Math.floor(this.y))},e.prototype.ceil=function(){return this.setTo(Math.ceil(this.x),Math.ceil(this.y))},e.prototype.negative=function(){return this.setTo(-this.x,-this.y)},e.prototype.multiplyAdd=function(t,n){return new e(this.x+t.x*n,this.y+t.y*n)},e.prototype.interpolate=function(t,n){return new e(this.x+(t.x-this.x)*n,this.y+(t.y-this.y)*n)},e.prototype.project=function(t){var n=new e,r=this.dot(t)/t.getMagnitudeSq();return 0!==r&&n.setTo(r*t.x,r*t.y),n},e.prototype.projectUnit=function(t){var n=new e,r=this.dot(t);return 0!==r&&n.setTo(r*t.x,r*t.y),n},e.prototype.toString=function(){return"[{Point (x="+this.x+" y="+this.y+")}]"},e.parse=function(t,n,r){void 0===n&&(n="x"),void 0===r&&(r="y");var i=new e;return t[n]&&(i.x=parseInt(t[n],10)),t[r]&&(i.y=parseInt(t[r],10)),i},e.isPoint=function(t){return null!=t&&"number"==typeof t.x&&"number"==typeof t.y},e.centroid=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=new e,i=t.length;if(1>i)throw new Error("sharp.Point# Parameter 'points' array must not be empty");if(1===i)return t[0];for(var o=0;i>o;o++)r.add(t[o].x,t[o].y);return r.divide(i,i),r},e}();t.Point=e,__reflect(e.prototype,"sharp.Point")}(sharp||(sharp={}));var sharp;!function(t){var e=function(){function e(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.setTo(t,e,n,r)}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},set:function(t){t>=this.bottom?(this.height=0,this.y=t):this.height=this.bottom-t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new t.Point(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new t.Point(this.right,this.y)},set:function(t){this.right=t.x,this.y=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new t.Point(this.x,this.bottom)},set:function(t){this.x=t.x,this.bottom=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.right=t.x,this.bottom=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(t){this.x=t-this.halfWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(t){this.y=t-this.halfHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){return new t.Point(this.centerX,this.centerY)},set:function(t){this.centerX=t.x,this.centerY=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(t){t&&this.setTo(0,0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edges",{get:function(){return[this.topLeft,this.topRight,this.bottomRight,this.bottomLeft]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sides",{get:function(){return[new t.Line(this.topLeft,this.topRight),new t.Line(this.topRight,this.bottomRight),new t.Line(this.bottomRight,this.bottomLeft),new t.Line(this.bottomLeft,this.topLeft)]},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.create=function(t,n,r,i){return void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),new e(t,n,r,i)},e.createFromBounds=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.setTo=function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},e.prototype.isEmpty=function(){return this.empty},e.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},e.prototype.offsetPoint=function(t){return this.offset(t.x,t.y)},e.prototype.scale=function(t,e){return void 0==e&&(e=t),this.width*=t,this.height*=e,this},e.prototype.centerOn=function(t,e){return this.centerX=t,this.centerY=e,this},e.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},e.prototype.floorAll=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},e.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},e.prototype.ceilAll=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},e.prototype.copyFrom=function(t){return this.setTo(t.x,t.y,t.width,t.height)},e.prototype.copyFromBounds=function(t){return this.setTo(t.left,t.top,t.width,t.height)},e.prototype.inflate=function(e,n){var r;if(e instanceof t.Point)r=e.x,n=e.y;else if(r=e,void 0==n)throw new Error('parameter#1 "dy" must be a number');return this.x-=r,this.width+=2*r,this.y-=n,this.height+=2*n,this},e.prototype.size=function(){return new t.Point(this.width,this.height)},e.prototype.resize=function(t,e){return this.width=t,this.height=e,this},e.prototype.contains=function(e,n){var r;if(e instanceof t.Point)r=e.x,n=e.y;else if(r=e,void 0==n)throw new Error('parameter#1 "y" must be a number');return this.width<=0||this.height<=0?!1:r>=this.x&&r<this.right&&n>=this.y&&n<this.bottom},e.prototype.containsRect=function(t){return this.volume>t.volume?!1:this.x>=t.x&&this.y>=t.y&&this.right<t.right&&this.bottom<t.bottom},e.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},e.prototype.sameDimensions=function(t){return this.width===t.width&&this.height===t.height},e.prototype.intersection=function(t){var n=new e;return this.intersects(t)&&(n.x=Math.max(this.x,t.x),n.y=Math.max(this.y,t.y),n.width=Math.min(this.right,t.right)-n.x,n.height=Math.min(this.bottom,t.bottom)-n.y),n},e.prototype.intersects=function(t){return this.width<=0||this.height<=0||t.width<=0||t.height<=0?!1:!(this.right<t.x||this.bottom<t.y||this.x>t.right||this.y>t.bottom)},e.prototype.intersectsRaw=function(t,e,n,r,i){return void 0===i&&(i=0),!(t>this.right+i||e<this.left-i||n>this.bottom+i||r<this.top-i)},e.prototype.union=function(t){var n=new e;return n.setTo(Math.min(this.x,t.x),Math.min(this.y,t.y),Math.max(this.right,t.right)-Math.min(this.left,t.left),Math.max(this.bottom,t.bottom)-Math.min(this.top,t.top))},e.prototype.random=function(){return new t.Point(this.randomX,this.randomY)},e.prototype.getPoint=function(e){var n=new t.Point;switch(e){default:case t.POSITION.TOP_LEFT:return n.setTo(this.x,this.y);case t.POSITION.TOP_CENTER:return n.setTo(this.centerX,this.y);case t.POSITION.TOP_RIGHT:return n.setTo(this.right,this.y);case t.POSITION.LEFT_CENTER:return n.setTo(this.x,this.centerY);case t.POSITION.CENTER:return n.setTo(this.centerX,this.centerY);case t.POSITION.RIGHT_CENTER:return n.setTo(this.right,this.centerY);case t.POSITION.BOTTOM_LEFT:return n.setTo(this.x,this.bottom);case t.POSITION.BOTTOM_CENTER:return n.setTo(this.centerX,this.bottom);case t.POSITION.BOTTOM_RIGHT:return n.setTo(this.right,this.bottom)}},e.prototype.toString=function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"},e.aabb=function(t){var n=new e,r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;return t.forEach(function(t){t.x>r&&(r=t.x),t.x<i&&(i=t.x),t.y>o&&(o=t.y),t.y<h&&(h=t.y)}),n.setTo(i,h,r-i,o-h),n},e}();t.Rectangle=e,__reflect(e.prototype,"sharp.Rectangle")}(sharp||(sharp={}));var sharp;!function(t){function e(e){return e*t.DEG_TO_RAD}function n(e){return e*t.RAD_TO_DEG}function r(t){return t*Math.PI/180}function i(t){return 180*t/Math.PI}function o(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function h(t,e){var n=o(t,e);return 360*(n>0?n:2*Math.PI+n)/(2*Math.PI)}function s(t,e,n){if(void 0===n&&(n=4),4!=n&&8!=n)throw new Error("directCount must be 4 / 8");for(var r=h(t,e),i=360/n,o=te.E,s=8/n,u=0,a=0;360>u;u+=i/2,a++)if(a%2&&(o=(o+s)%8),r>=u&&u+i/2>r)return o;return o}function u(t,e){var n=s(t,e,4);return n/2}function a(e,n,r,i){if(e instanceof t.Point!=n instanceof t.Point)throw new Error("parameter#0 type must same to parameter#1");var o,h;return e instanceof t.Point?(o=e,h=n):(o=new t.Point(e,n),h=new t.Point(r,i)),[o,h]}function c(t,e,n,r){var i=__read(a(t,e,n,r),2),o=i[0],h=i[1];return Math.pow(Math.pow(Math.abs(h.x-o.x),2)+Math.pow(Math.abs(h.y-o.y),2),.5)}function f(t,e,n,r){var i=__read(a(t,e,n,r),2),o=i[0],h=i[1],s=o.x-h.x,u=o.y-h.y;return s*s+u*u}function y(t,e,n,r,i){return void 0===i&&(i=2),Math.sqrt(Math.pow(n-t,i)+Math.pow(r-e,i))}function p(t,e){return Math.sqrt(t*t+e*e)}function l(e,n){return n=-n,new t.Point(e.x*Math.cos(n)+e.y*Math.sin(n),-e.x*Math.sin(n)+e.y*Math.cos(n))}function d(e,n,r){return void 0===r&&(r=.05),e===n?e:(Math.abs(n-e)<=r||Math.abs(n-e)>=t.PI2-r?e=n:(Math.abs(n-e)>Math.PI&&(e>n?n+=t.PI2:n-=t.PI2),n>e?e+=r:e>n&&(e-=r)),e)}function g(t,e,n,r){return Math.atan2(r-e,n-t)}function x(t,e){var n=e-t;if(0===n)return 0;var r=Math.floor((n- -180)/360);return n-360*r}function m(t,e,n,r){return Math.atan2(n-t,r-e)}function v(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}function b(t){return w(t+Math.PI)}function T(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function w(t){return t%=2*Math.PI,t>=0?t:t+2*Math.PI}function M(t,e){return void 0===e&&(e=!1),e?math.wrap(t,-Math.PI,Math.PI):math.wrap(t,-180,180)}function P(e,n,r){return new t.Point(e.x+Math.cos(r)*n,e.y+Math.sin(r)*n)}function O(t,e){return t.equals(e)}function _(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return n>=o}function E(t,e,n){return _(n,t,e)}function I(t,e){return t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom}function R(t,e){return I(e,t)}function N(t,e){return t.right>=e.left&&t.left<=e.right&&t.bottom>=e.top&&t.top<=e.bottom}function S(t,e,n,r){var i=t.x-n.x,o=t.y-n.y,h=Math.sqrt(i*i+o*o);return e+r>=h}function H(t,e,n){var r=t.x,i=t.y;t.x<n.left?r=n.left:t.x>n.right&&(r=n.right),t.y<n.top?i=n.top:t.y>n.bottom&&(i=n.bottom);var o=t.x-r,h=t.y-i,s=Math.sqrt(o*o+h*h);return e>=s}function L(t,e,n){return H(e,n,t)}function j(t,e,n){var r=c(t,e),i=c(t,n),o=c(e,n),h=.1;return r+i>=o-h&&o+h>=r+i}function q(t,e,n){return j(n,t,e)}function A(e,n,r){var i=n.x-r.x,o=n.y-r.y,h=Math.sqrt(i*i+o*o),s=((e.x-n.x)*(r.x-n.x)+(e.y-n.y)*(r.y-n.y))/Math.pow(h,2),u=n.x+s*(r.x-n.x),a=n.y+s*(r.y-n.y),c=q(n,r,new t.Point(u,a));return c?new t.Point(u,a):!1}function C(t,e,n,r){var i=_(t,n,r),o=_(e,n,r);if(i||o)return!0;var h=A(n,t,e);if(h===!1)return!1;var s=h.x-n.x,u=h.y-n.y,a=Math.sqrt(s*s+u*u);return r>=a}function z(t,e,n,r){return C(n,r,t,e)}function F(e,n,r,i,o){void 0===o&&(o=!0);var h=e,s=n,u=r,a=i,c=s.y-h.y,f=a.y-u.y,y=h.x-s.x,p=u.x-a.x,l=s.x*h.y-h.x*s.y,d=a.x*u.y-u.x*a.y,g=c*p-f*y,x=new t.Point;if(0===g)return!1;if(x.x=(y*d-p*l)/g,x.y=(f*l-c*d)/g,o){var m=(a.y-u.y)*(s.x-h.x)-(a.x-u.x)*(s.y-h.y),v=((a.x-u.x)*(h.y-u.y)-(a.y-u.y)*(h.x-u.x))/m,b=((s.x-h.x)*(h.y-u.y)-(s.y-h.y)*(h.x-u.x))/m;return v>=0&&1>=v&&b>=0&&1>=b?x:!1}return x}function W(t,e,n,r){var i=F(t,e,n,r);return i!==!1}function B(e,n,r){var i=e,o=n,h=W(i,o,new t.Point(r.left,r.top),new t.Point(r.left,r.bottom)),s=W(i,o,new t.Point(r.right,r.top),new t.Point(r.right,r.bottom)),u=W(i,o,new t.Point(r.left,r.top),new t.Point(r.right,r.top)),a=W(i,o,new t.Point(r.left,r.bottom),new t.Point(r.right,r.bottom));
return h||s||u||a}function D(t,e,n){return B(e,n,t)}function G(t,e){for(var n=!1,r=0,i=0;i<e.length;i++){r=i+1,r==e.length&&(r=0);var o=e[i],h=e[r];(o.y>t.y&&h.y<t.y||o.y<t.y&&h.y>t.y)&&t.x<(h.x-o.x)*(t.y-o.y)/(h.y-o.y)+o.x&&(n=!n)}return n}function Y(t,e){return G(e,t)}function X(t,e,n){for(var r=0,i=0;i<n.length;i++){r=i+1,r==n.length&&(r=0);var o=n[i],h=n[r],s=C(o,h,t,e);if(s)return!0}return!1}function U(t,e,n){return X(e,n,t)}function Q(t,e){for(var n=0,r=0;r<e.length;r++){n=r+1,n==e.length&&(n=0);var i=e[r],o=e[n],h=B(i,o,t);if(h)return!0;var s=Y(e,t.topLeft);if(s)return!0}return!1}function k(t,e){return Q(e,t)}function V(t,e,n){for(var r=0,i=0;i<n.length;i++){r=i+1,r==n.length&&(r=0);var o=n[i],h=n[r],s=W(t,e,o,h);if(s)return!0}return!1}function K(t,e,n){return V(e,n,t)}function Z(t,e){for(var n=0,r=0;r<t.length;r++){n=r+1,n==t.length&&(n=0);var i=t[r],o=t[n],h=K(e,i,o);if(h)return!0;if(h=Y(t,e[0]))return!0}return!1}function J(t,e){var n=e[1].x,r=e[2].x,i=e[3].x,o=e[1].y,h=e[2].y,s=e[3].y,u=Math.abs((r-n)*(s-o)-(i-n)*(h-o)),a=Math.abs((n-t.x)*(h-t.y)-(r-t.x)*(o-t.y)),c=Math.abs((r-t.x)*(s-t.y)-(i-t.x)*(h-t.y)),f=Math.abs((i-t.x)*(o-t.y)-(n-t.x)*(s-t.y));return a+c+f==u}function $(t,e){return J(e,t)}var te;!function(t){t[t.N=0]="N",t[t.NE=1]="NE",t[t.E=2]="E",t[t.SE=3]="SE",t[t.S=4]="S",t[t.SW=5]="SW",t[t.W=6]="W",t[t.NW=7]="NW",t[t.North=0]="North",t[t.Northeast=1]="Northeast",t[t.East=2]="East",t[t.Southeast=3]="Southeast",t[t.South=4]="South",t[t.Southwest=5]="Southwest",t[t.West=6]="West",t[t.Nothwest=7]="Nothwest",t[t.NORTH=0]="NORTH",t[t.NORTHEAST=1]="NORTHEAST",t[t.EAST=2]="EAST",t[t.SOUTHEAST=3]="SOUTHEAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTHWEST=5]="SOUTHWEST",t[t.WEST=6]="WEST",t[t.NOTHWEST=7]="NOTHWEST"}(te=t.DIRECTION||(t.DIRECTION={}));var ee;!function(t){t[t.TOP=0]="TOP",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.LEFT=3]="LEFT",t[t.Top=0]="Top",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left",t[t.UP=0]="UP",t[t.FORWARD=1]="FORWARD",t[t.DOWN=2]="DOWN",t[t.BACKWARD=3]="BACKWARD",t[t.Up=0]="Up",t[t.Forward=1]="Forward",t[t.Down=2]="Down",t[t.Backward=3]="Backward",t[t.TOP_LEFT=4]="TOP_LEFT",t[t.TOP_CENTER=5]="TOP_CENTER",t[t.TOP_RIGHT=6]="TOP_RIGHT",t[t.LEFT_CENTER=7]="LEFT_CENTER",t[t.CENTER=8]="CENTER",t[t.RIGHT_CENTER=9]="RIGHT_CENTER",t[t.BOTTOM_LEFT=10]="BOTTOM_LEFT",t[t.BOTTOM_CENTER=11]="BOTTOM_CENTER",t[t.BOTTOM_RIGHT=12]="BOTTOM_RIGHT"}(ee=t.POSITION||(t.POSITION={})),t.PI2=2*Math.PI,t.HALF_PI=.5*Math.PI,t.DEG_TO_RAD=Math.PI/180,t.RAD_TO_DEG=180/Math.PI,t.degToRad=e,t.radToDeg=n,t.d2r=r,t.r2d=i,t.slope=o,t.slopeDegree=h,t.direction=s,t.position=u,t.optional2Points=a,t.distance=c,t.distanceSq=f,t.distancePow=y,t.hypot=p,t.rotatedPoint=l,t.rotateToAngle=d,t.angleBetween=g,t.getShortestAngle=x,t.angleBetweenY=m,t.angleBetweenPointsY=v,t.reverseAngle=b,t.angleBetweenPoints=T,t.normalizeAngle=w,t.wrapAngle=M,t.circlePoint=P,t.pointHitPoint=O,t.pointHitCircle=_,t.circleHitPoint=E,t.pointHitRect=I,t.rectHitPoint=R,t.rectHitRect=N,t.circleHitCircle=S,t.circleHitRect=H,t.rectHitCircle=L,t.pointHitLine=j,t.lineHitPoint=q,t.pointLineClosest=A,t.lineHitCircle=C,t.circleHitLine=z,t.lineLineIntersection=F,t.lineHitLine=W,t.lineHitRect=B,t.rectHitLine=D,t.pointHitPolygon=G,t.polygonHitPoint=Y,t.circleHitPolygon=X,t.polygonHitCircle=U,t.rectHitPolygon=Q,t.polygonHitRect=k,t.lineHitPolygon=V,t.polygonHitLine=K,t.polygonHitPolygon=Z,t.pointHitTriangle=J,t.triangleHitPoint=$}(sharp||(sharp={}));