"use strict";var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__generator=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=o[2&r[0]?"return":r[0]?"throw":"next"])&&!(s=s.call(o,r[1])).done)return s;switch(o=0,s&&(r=[0,s.value]),r[0]){case 0:case 1:s=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){a.label=r[1];break}if(6===r[0]&&a.label<s[1]){a.label=s[1],s=r;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(r);break}s[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(n){r=[6,n],o=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,o,s,h,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return h={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},__read=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(n=o.next()).done;)s.push(n.value)}catch(h){i={error:h}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s},__spread=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t},__values=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},http;!function(t){var e=function(){function t(t,e){void 0===e&&(e=2e4),this.autoTip=!1,this.instance=axios.create({baseURL:null==t?"":t,timeout:e,headers:{"X-Requested-With":"XMLHttpRequest"},responseType:"json",xsrfHeaderName:"X-CSRF-TOKEN",xsrfCookieName:"XSRF-TOKEN",transformRequest:[function(t,e){return t}]})}return t.prototype.request=function(t,e,r){void 0===r&&(r={});var n="get"==t.toLowerCase()?r:{};return"get"==t.toLowerCase()&&(r=null),this.instance.request({method:t.toLowerCase(),url:e,params:n,data:r})},t}();t.Query=e,__reflect(e.prototype,"http.Query")}(http||(http={}));var sharp;!function(t){var e=function(){function e(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.setTo(t,e)}return e.prototype.clone=function(){return new e(this.x,this.y)},e.create=function(t,r){return void 0===t&&(t=0),void 0===r&&(r=0),new e(t,r)},e.createFrom=function(t,r,n){void 0===r&&(r="x"),void 0===n&&(n="y");var i=new e;return t[r]&&(i.x=parseInt(t[r],10)),t[n]&&(i.y=parseInt(t[n],10)),i},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t},e.prototype.setTo=function(t,r){return t instanceof e?(this.x=t.x,this.y=t.y):(this.x=t,this.y=void 0==r?t:r),this},e.prototype.polar=function(t,e){return void 0===e&&(e=1),this.setTo(Math.cos(t)*e,Math.sin(t)*e)},e.prototype.invert=function(){return this.setTo(this.y,this.x)},e.prototype.subtract=function(t,e){return void 0==e&&(e=t),this.x-=t,this.y-=e,this},e.prototype.add=function(t,e){return void 0==e&&(e=t),this.x+=t,this.y+=e,this},e.prototype.multiply=function(t,e){return void 0==e&&(e=t),this.x*=t,this.y*=e,this},e.prototype.divide=function(t,e){return void 0==e&&(e=t),this.x/=t,this.y/=e,this},e.prototype.clampX=function(t,e){return this.x=math.clamp(this.x,t,e),this},e.prototype.clampY=function(t,e){return this.y=math.clamp(this.y,t,e),this},e.prototype.clamp=function(t,e){return this.x=math.clamp(this.x,t,e),this.y=math.clamp(this.y,t,e),this},e.prototype.clip=function(t){var e=t.left,r=t.top,n=t.right,i=t.bottom;return this.x<e?this.x=e:this.x>n&&(this.x=n),this.y<r?this.y=r:this.y>i&&(this.y=i),this},e.prototype.distance=function(e,r){void 0===r&&(r=!1);var n=t.distance(this,e);return r?Math.round(n):n},e.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},e.prototype.equalsXY=function(t,e){return this.x===t&&this.y===e},e.prototype.fuzzyEquals=function(t,e){return void 0===e&&(e=1e-4),math.fuzzyEquals(this.x,t.x,e)&&math.fuzzyEquals(this.y,t.y,e)},e.prototype.fuzzyEqualsXY=function(t,r,n){return void 0===n&&(n=1e-4),this.fuzzyEquals(new e(t,r),n)},e.prototype.angle=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},e.prototype.rotate=function(t,e,r,n){if(void 0===e&&(e=0),void 0===r&&(r=0),null==n){this.subtract(e,r);var i=Math.sin(t),o=Math.cos(t),s=o*this.x-i*this.y,h=i*this.x+o*this.y;this.x=s+e,this.y=h+r}else{var a=t+Math.atan2(this.y-r,this.x-e);this.x=e+n*Math.cos(a),this.y=r+n*Math.sin(a)}return this},e.prototype.rotateAbout=function(t,e){return this.rotate(t,e.x,e.y)},e.prototype.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.getMagnitudeSquared=function(){return this.x*this.x+this.y*this.y},e.prototype.setMagnitude=function(t){return this.normalize().multiply(t,t)},e.prototype.normalize=function(){if(!this.isZero()){var t=this.getMagnitude();this.x/=t,this.y/=t}return this},e.prototype.limit=function(t){return this.getMagnitudeSquared()>t*t&&this.setMagnitude(t),this},e.prototype.isZero=function(){return 0===this.x&&0===this.y},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.cross=function(t){return this.x*t.y-this.y*t.x},e.prototype.cross3=function(t,e){return(t.x-this.x)*(e.y-this.y)-(t.y-this.y)*(e.x-this.x)},e.prototype.perp=function(){return this.setTo(-this.y,this.x)},e.prototype.rperp=function(){return this.setTo(this.y,-this.x)},e.prototype.normalRightHand=function(){return this.setTo(-1*this.y,this.x)},e.prototype.floor=function(){return this.setTo(Math.floor(this.x),Math.floor(this.y))},e.prototype.ceil=function(){return this.setTo(Math.ceil(this.x),Math.ceil(this.y))},e.prototype.negative=function(){return this.setTo(-this.x,-this.y)},e.prototype.multiplyAdd=function(t,r){return new e(this.x+t.x*r,this.y+t.y*r)},e.prototype.interpolate=function(t,r){return new e(this.x+(t.x-this.x)*r,this.y+(t.y-this.y)*r)},e.prototype.project=function(t){var r=new e,n=this.dot(t)/t.getMagnitudeSquared();return 0!==n&&r.setTo(n*t.x,n*t.y),r},e.prototype.projectUnit=function(t){var r=new e,n=this.dot(t);return 0!==n&&r.setTo(n*t.x,n*t.y),r},e.prototype.toString=function(){return"[{Point (x="+this.x+" y="+this.y+")}]"},e.isPoint=function(t){return null!=t&&"number"==typeof t.x&&"number"==typeof t.y},e.centroid=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=new e,i=t.length;if(1>i)throw new Error("sharp.Point# Parameter 'points' array must not be empty");if(1===i)return t[0];for(var o=0;i>o;o++)n.add(t[o].x,t[o].y);return n.divide(i,i),n},e}();t.Point=e,__reflect(e.prototype,"sharp.Point"),t.Vector=e}(sharp||(sharp={}));var sharp;!function(t){var e=function(){function e(e,r){void 0==e?(this.min=new t.Point,this.max=new t.Point):this.setTo(e,r)}return e.prototype.clone=function(){var t=new e;return t.min=this.min.clone(),t.max=this.max.clone(),t},e.prototype.setTo=function(t,e){this.min.x=1/0,this.max.x=-(1/0),this.min.y=1/0,this.max.y=-(1/0);for(var r=0;r<t.length;r++){var n=t.items[r];n.x>this.max.x&&(this.max.x=n.x),n.x<this.min.x&&(this.min.x=n.x),n.y>this.max.y&&(this.max.y=n.y),n.y<this.min.y&&(this.min.y=n.y)}return e&&this.velocity(e),this},e.prototype.velocity=function(t){return t.x>0?this.max.x+=t.x:this.min.x+=t.x,t.y>0?this.max.y+=t.y:this.min.y+=t.y,this},e.prototype.contains=function(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y},e.prototype.overlaps=function(t){return this.min.x<=t.max.x&&this.max.x>=t.min.x&&this.max.y>=t.min.y&&this.min.y<=t.max.y},e.prototype.translate=function(t){return this.min.x+=t.x,this.max.x+=t.x,this.min.y+=t.y,this.max.y+=t.y,this},e.prototype.shift=function(t){var e=this.max.x-this.min.x,r=this.max.y-this.min.y;return this.min.x=t.x,this.max.x=t.x+e,this.min.y=t.y,this.max.y=t.y+r,this},e}();t.Bounds=e,__reflect(e.prototype,"sharp.Bounds")}(sharp||(sharp={}));var DeferredPromise=function(){function t(){var t=this;this._promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),this.then=this._promise.then.bind(this._promise),this["catch"]=this._promise["catch"].bind(this._promise),this[Symbol.toStringTag]="Promise"}return t.prototype.promise=function(){return this._promise},t}();__reflect(DeferredPromise.prototype,"DeferredPromise"),Promise.prototype.done=function(t,e){this.then(t,e)["catch"](function(t){setTimeout(function(){throw t},0)})},Promise.prototype["finally"]=function(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){throw r})})};var math;!function(t){function e(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e}function r(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)}function n(t,e){if(void 0===t&&(t=0),void 0===e&&(e=1),t===e)return t;if(t>e){var r=t;t=e,e=r}return Math.random()*(e-t)+t}function i(t,e){if(void 0===t&&(t=0),void 0===e&&(e=1),t===e)return t;if(t>e){var r=t;t=e,e=r}return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function o(t,e,r){return void 0===r&&(r=1e-4),Math.abs(t-e)<r}function s(t,e,r){return void 0===r&&(r=1e-4),e+r>t}function h(t,e,r){return void 0===r&&(r=1e-4),t>e-r}function a(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}function u(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=t.length,i=0;n>i;i++)r+=+t[i];return r/n}function f(t){return t%1}function p(t,e,r){return void 0===r&&(r=0),0===e?t:(t-=r,t=e*Math.round(t/e),r+t)}function y(t,e,r){return void 0===r&&(r=0),0===e?t:(t-=r,t=e*Math.floor(t/e),r+t)}function l(t,e,r){return void 0===r&&(r=0),0===e?t:(t-=r,t=e*Math.ceil(t/e),r+t)}function d(t,e,r){void 0===e&&(e=0),void 0===r&&(r=10);var n=Math.pow(r,-e);return Math.round(t*n)/n}function x(t,e,r){void 0===e&&(e=0),void 0===r&&(r=10);var n=Math.pow(r,-e);return Math.floor(t*n)/n}function m(t,e,r){void 0===e&&(e=0),void 0===r&&(r=10);var n=Math.pow(r,-e);return Math.ceil(t*n)/n}function g(t,e,r){return Math.min(t+e,r)}function v(t,e,r){return Math.max(t-e,r)}function b(t,e,r){var n=r-e;if(0>=n)return 0;var i=(t-e)%n;return 0>i&&(i+=n),i+e}function w(t,e,r){var n;return t=Math.abs(t),e=Math.abs(e),r=Math.abs(r),n=(t+e)%r}function P(t){return!!(1&t)}function M(t){return!(1&t)}function T(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t,n=0,i=r.length,o=1;i>o;o++)r[o]<r[n]&&(n=o);return r[n]}function O(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t,n=0,i=r.length,o=1;i>o;o++)r[o]>r[n]&&(n=o);return r[n]}function _(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=e,i=0,o=n.length,s=1;o>s;s++)n[s][t]<n[i][t]&&(i=s);return n[i][t]}function E(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=e,i=0,o=n.length,s=1;o>s;s++)n[s][t]>n[i][t]&&(i=s);return n[i][t]}function I(t,e){var r=t.length-1,n=r*e,i=Math.floor(n);return 0>e?S(t[0],t[1],n):e>1?S(t[r],t[r-1],r-n):S(t[i],t[i+1>r?r:i+1],n-i)}function R(t,e){for(var r=0,n=t.length-1,i=0;n>=i;i++)r+=Math.pow(1-e,n-i)*Math.pow(e,i)*t[i]*N(n,i);return r}function L(t,e){var r=t.length-1,n=r*e,i=Math.floor(n);return t[0]===t[r]?(0>e&&(i=Math.floor(n=r*(1+e))),H(t[(i-1+r)%r],t[i],t[(i+1)%r],t[(i+2)%r],n-i)):0>e?t[0]-(H(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[r]-(H(t[r],t[r],t[r-1],t[r-1],n-r)-t[r]):H(t[i?i-1:0],t[i],t[i+1>r?r:i+1],t[i+2>r?r:i+2],n-i)}function S(t,e,r){return(e-t)*r+t}function N(t,e){return j(t)/j(e)/j(t-e)}function j(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}function H(t,e,r,n,i){var o=.5*(r-t),s=.5*(n-e),h=i*i,a=i*h;return(2*e-2*r+o+s)*a+(-3*e+3*r-2*o-s)*h+o*i+e}function q(t,e){return Math.abs(t-e)}function A(t){return t>0?Math.ceil(t):Math.floor(t)}function C(t,e,r,n){void 0===e&&(e=1),void 0===r&&(r=1),void 0===n&&(n=1);for(var i=e,o=r,s=n*Math.PI/t,h=[],a=[],u=0;t>u;u++)o-=i*s,i+=o*s,h[u]=o,a[u]=i;return{sin:a,cos:h,length:t}}function F(t,e,r){return e>t?e:t>r?r:t}function z(t,e){return e>t?e:t}function B(t,e,r){return Math.abs(t-e)<=r}function W(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)}function D(t,e,r){return t=Math.max(0,Math.min(1,(t-e)/(r-e))),t*t*(3-2*t)}function G(t,e,r){return t=Math.max(0,Math.min(1,(t-e)/(r-e))),t*t*t*(t*(6*t-15)+10)}function Y(t){return 0>t?-1:t>0?1:0}function X(t,e,r){return void 0===r&&(r=0),t>e||r>e?1:r>t||r>t?0:(t-r)/e}t.getNextPowerOfTwo=e,t.isPowerOfTwo=r,t.random=n,t.between=i,t.fuzzyEquals=o,t.fuzzyLessThan=s,t.fuzzyGreaterThan=h,t.fuzzyCeil=a,t.fuzzyFloor=u,t.average=c,t.shear=f,t.snapTo=p,t.snapToFloor=y,t.snapToCeil=l,t.roundTo=d,t.floorTo=x,t.ceilTo=m,t.maxAdd=g,t.minSub=v,t.wrap=b,t.wrapValue=w,t.isOdd=P,t.isEven=M,t.min=T,t.max=O,t.minProperty=_,t.maxProperty=E,t.linearInterpolation=I,t.bezierInterpolation=R,t.catmullRomInterpolation=L,t.linear=S,t.bernstein=N,t.factorial=j,t.catmullRom=H,t.difference=q,t.roundAwayFromZero=A,t.sinCosGenerator=C,t.clamp=F,t.clampBottom=z,t.within=B,t.mapLinear=W,t.smoothstep=D,t.smootherstep=G,t.sign=Y,t.percent=X}(math||(math={}));var array;!function(t){function e(t){return Array.from(new Set(t))}function r(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=__spread(t),o=function(t){i=i.filter(function(e){return t.includes(e)})};try{for(var s=__values(r),h=s.next();!h.done;h=s.next()){var a=h.value;o(a)}}catch(u){c={error:u}}finally{try{h&&!h.done&&(f=s["return"])&&f.call(s)}finally{if(c)throw c.error}}return e(i);var c,f}function n(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=__spread(t),o=function(t){i=i.filter(function(e){return!t.includes(e)})};try{for(var s=__values(r),h=s.next();!h.done;h=s.next()){var a=h.value;o(a)}}catch(u){c={error:u}}finally{try{h&&!h.done&&(f=s["return"])&&f.call(s)}finally{if(c)throw c.error}}return e(i);var c,f}function i(t,e,r){void 0===r&&(r=1);var n;return __generator(this,function(i){switch(i.label){case 0:if(null==e&&(e=t,t=0),n=t,!(0>r))return[3,4];i.label=1;case 1:return n>e?[4,n]:[3,3];case 2:return i.sent(),n+=r,[3,1];case 3:return[3,6];case 4:return e>n?[4,n]:[3,6];case 5:return i.sent(),n+=r,[3,4];case 6:return[2]}})}t.unique=e,t.intersect=r,t.diff=n,t.xrange=i}(array||(array={}));var http;!function(t){function e(t){var e;if(t instanceof FormData)e=t;else{e=new FormData;for(var r in t)e.append(r,t[r])}return e}function r(e,r){var n=new t.Query;return n.request("get",e,r)}function n(e,r){var n=new t.Query;return n.request("post",e,r)}function i(r,n){var i=new t.Query;return i.request("post",r,e(n))}function o(e,r){var n=new t.Query;return n.request("head",e,r)}function s(e,r){var n=new t.Query;return n.request("options",e,r)}function h(e,r){var n=new t.Query;return n.request("patch",e,r)}function a(e,r){var n=new t.Query;return n.request("put",e,r)}function u(e,r){var n=new t.Query;return n.request("delete",e,r)}t.objectToForm=e,t.get=r,t.post=n,t.form=i,t.head=o,t.options=s,t.patch=h,t.put=a,t.DELETE=u,t["delete"]=u}(http||(http={}));var sharp;!function(t){var e=function(){function e(t){void 0==t?this.items=[]:this.setTo(t)}return Object.defineProperty(e.prototype,"length",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e.prototype.setTo=function(e){for(var r={},n=0;n<e.length;n++){var i=(n+1)%e.length,o=t.Point.create(e.at(i).y-e.at(n).y,e.at(n).x-e.at(i).x).normalize(),s=0===o.y?1/0:o.x/o.y,h=s.toFixed(3).toString();r[h]=o}return this.items=object.values(r),this},e.prototype.clone=function(){var t=new e;return t.items=this.cloneItems(),t},e.prototype.cloneItems=function(){var t=[];return this.items.forEach(function(e){return t.push(e.clone())}),t},e.prototype.rotate=function(t){if(0===t)return this;for(var e=Math.cos(t),r=Math.sin(t),n=0;n<this.items.length;n++){var i=this.items[n],o=void 0;o=i.x*e-i.y*r,i.y=i.x*r+i.y*e,i.x=o}return this},e}();t.Axes=e,__reflect(e.prototype,"sharp.Axes")}(sharp||(sharp={}));var sharp;!function(t){var e=function(){function e(t,e,r,n){if(void 0===n&&(n=!1),isNaN(t))this.x=t.x,this.y=t.y,this.index=t.index,this.isInternal=t.isInternal;else{if(this.x=t,void 0==e||void 0==r)throw new Error("parameter#1, #2 must set a value.");this.y=e,this.index=r,this.isInternal=n}}return e.create=function(t,r,n,i){return void 0===i&&(i=!1),new e(t,r,n,i)},e.prototype.clone=function(){return new e(this.x,this.y,this.index,this.isInternal)},e.prototype.point=function(){return new t.Point(this.x,this.y)},e}();t.Vertex=e,__reflect(e.prototype,"sharp.Vertex");var r=function(){function r(t){this.setTo(t)}return Object.defineProperty(r.prototype,"length",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),r.prototype.setTo=function(r){var n=[];if(this.items=[],r instanceof String){var i=/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi;r.replace(i,function(e,r,i){return n.push(t.Point.create(parseFloat(r),parseFloat(i))),""})}else if(r instanceof Array&&r.length>0){if(r[0]instanceof e)return this.items=r,this;r[0]instanceof t.Point&&(n=r)}for(var o=0;o<n.length;o++){var s=n[o],h=e.create({x:s.x,y:s.y,index:o,isInternal:!1});this.items.push(h)}return this},r.create=function(t){return new r(t)},r.prototype.clone=function(){var t=new r([]);return t.items=this.cloneItems(),t},r.prototype.cloneItems=function(){var t=[];return this.items.forEach(function(e){t.push(e.clone())}),t},r.prototype.at=function(t){return this.items[t]},r.prototype.getBounds=function(){return new t.Bounds(this)},r.prototype.getAxes=function(){return new t.Axes(this)},r.prototype.centre=function(){for(var e,r,n,i=this.area(!0),o=new t.Point,s=0;s<this.items.length;s++){n=(s+1)%this.items.length;var h=this.items[s].point(),a=this.items[n].point();e=h.cross(a),r=h.add(a.x,a.y).multiply(e),o.add(r.x,r.y)}return o.divide(6*i)},r.prototype.mean=function(){for(var e=new t.Point,r=0;r<this.items.length;r++)e.x+=this.items[r].x,e.y+=this.items[r].y;return e.divide(this.items.length)},r.prototype.area=function(t){void 0===t&&(t=!1);for(var e=0,r=this.items.length-1,n=0;n<this.items.length;n++)e+=(this.items[r].x-this.items[n].x)*(this.items[r].y+this.items[n].y),r=n;return t?e/2:Math.abs(e)/2},r.prototype.inertia=function(t){for(var e,r,n=0,i=0,o=this.items,s=0;s<o.length;s++){r=(s+1)%o.length;var h=o[s].point(),a=o[r].point();e=Math.abs(a.cross(h)),n+=e*(a.dot(a)+a.dot(h)+h.dot(h)),i+=e}return t/6*(n/i)},r.prototype.translate=function(t,e){var r;if(e)for(r=0;r<this.items.length;r++)this.items[r].x+=t.x*e,this.items[r].y+=t.y*e;else for(r=0;r<this.items.length;r++)this.items[r].x+=t.x,this.items[r].y+=t.y;return this},r.prototype.rotate=function(t,e){if(0===t)return this;for(var r=Math.cos(t),n=Math.sin(t),i=0;i<this.items.length;i++){var o=this.items[i],s=o.x-e.x,h=o.y-e.y;o.x=e.x+(s*r-h*n),o.y=e.y+(s*n+h*r)}return this},r.prototype.contains=function(t){for(var e=0;e<this.items.length;e++){var r=this.items[e],n=this.items[(e+1)%this.items.length];if((t.x-r.x)*(n.y-r.y)+(t.y-r.y)*(r.x-n.x)>0)return!1}return!0},r.prototype.scale=function(t,e,r){if(1==t&&1==e)return this;r=r||this.centre();for(var n,i=0;i<this.items.length;i++){n=this.items[i];var o=n.point().subtract(r.x,r.y);this.items[i].x=r.x+o.x*t,this.items[i].y=r.y+o.y*e}return this},r.prototype.chamfer=function(r,n,i,o){void 0===r&&(r=[8]),void 0===n&&(n=-1),void 0===i&&(i=2),void 0===o&&(o=14);for(var s=[],h=0;h<this.items.length;h++){var a=this.items[h-1>=0?h-1:this.items.length-1],u=this.items[h],c=this.items[(h+1)%this.items.length],f=r[h<r.length?h:r.length-1];if(0!==f){var p=t.Point.create(u.y-a.y,a.x-u.x).normalize(),y=t.Point.create(c.y-u.y,u.x-c.x).normalize(),l=Math.sqrt(2*Math.pow(f,2)),d=p.clone().multiply(f),x=p.clone().add(y.x,y.y).multiply(.5).normalize(),m=x.clone().multiply(l),g=u.point().subtract(m.x,m.y),v=n;-1===n&&(v=1.75*Math.pow(f,.32)),v=math.clamp(v,i,o),v%2===1&&(v+=1);for(var b=Math.acos(p.dot(y)),w=b/v,P=0;v>P;P++){var M=d.clone().rotate(w*P).add(g.x,g.y);s.push(e.create(M.x,M.y,s.length,u.isInternal))}}else s.push(u)}return this.setTo(s)},r.prototype.clockwiseSort=function(){var t=this.mean();return this.items.sort(function(e,r){return t.angle(e.point())-t.angle(r.point())}),this},r.prototype.isConvex=function(){var t,e,r,n,i=0,o=this.items.length;if(3>o)return null;for(t=0;o>t;t++)if(e=(t+1)%o,r=(t+2)%o,n=(this.items[e].x-this.items[t].x)*(this.items[r].y-this.items[e].y),n-=(this.items[e].y-this.items[t].y)*(this.items[r].x-this.items[e].x),0>n?i|=1:n>0&&(i|=2),3===i)return!1;return 0!==i?!0:null},r.prototype.hull=function(){var t,e,r=[],n=[],i=this.cloneItems().slice(0);for(i.sort(function(t,e){var r=t.x-e.x;return 0!==r?r:t.y-e.y}),e=0;e<i.length;e+=1){for(t=i[e];n.length>=2&&n[n.length-2].point().cross3(n[n.length-1].point(),t.point())<=0;)n.pop();n.push(t)}for(e=i.length-1;e>=0;e-=1){for(t=i[e];r.length>=2&&r[r.length-2].point().cross3(r[r.length-1].point(),t.point())<=0;)r.pop();r.push(t)}return r.pop(),n.pop(),r.concat(n)},r}();t.Vertices=r,__reflect(r.prototype,"sharp.Vertices")}(sharp||(sharp={}));var sharp;!function(t){var e=function(){function e(e,r,n){e instanceof t.Point?this.setTo(e,r):this.setTo(e,r,n)}return Object.defineProperty(e.prototype,"diameter",{get:function(){return 2*this.radius},set:function(t){this.radius=2*t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){return new t.Point(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x-this.radius},set:function(t){t>this.x?this.radius=0:this.radius=this.x-t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.radius},set:function(t){t<this.x?this.radius=0:this.radius=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y-this.radius},set:function(t){t>this.y?this.radius=0:this.radius=this.y-t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.radius},set:function(t){t<this.y?this.radius=0:this.radius=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.radius>0?Math.PI*this.radius*this.radius:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"circumference",{get:function(){return 2*(Math.PI*this.radius)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.diameter},set:function(t){t===!0&&this.setTo(0,0,0)},enumerable:!0,configurable:!0}),e.prototype.setTo=function(e,r,n){var i;if(e instanceof t.Point)i=e.x,n=r,r=e.y;else{if(void 0==n)throw new Error("parameter#2 radius must be a number");i=e}return this.x=i,this.y=r,this.radius=n,this},e.prototype.clone=function(){return new e(this.x,this.y,this.diameter)},e.create=function(r,n,i){return r instanceof t.Point?new e(r,n):new e(r,n,i)},e.prototype.random=function(){var e=2*Math.PI*Math.random(),r=Math.random()+Math.random(),n=r>1?2-r:r,i=n*Math.cos(e),o=n*Math.sin(e);return new t.Point(this.x+i*this.radius,this.y+o*this.radius)},e.prototype.getBounds=function(){return new t.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},e.prototype.createFrom=function(t){return new e(t.x,t.y,t.diameter)},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.diameter=this.diameter,t},e.prototype.distance=function(e,r){void 0===r&&(r=!1);var n=t.distance(this.x,this.y,e.x,e.y);return r?Math.round(n):n},e.prototype.contains=function(t,e){if(this.radius>0&&t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom){var r=(this.x-t)*(this.x-t),n=(this.y-e)*(this.y-e);return r+n<=this.radius*this.radius}return!1},e.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.diameter===t.diameter},e.prototype.circumferencePoint=function(e){return new t.Point(this.x+this.radius*Math.cos(e),this.y+this.radius*Math.sin(e))},e.prototype.sample=function(e,r,n){void 0===e&&(e=60),void 0===r&&(r=0),void 0===n&&(n=t.PI2);for(var i=0,o=[];e>i;)o.push(this.circumferencePoint(math.linear(r,n,i/e))),i+=1;return o},e.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},e.prototype.offsetPoint=function(t){return this.offset(t.x,t.y)},e.prototype.intersects=function(e){return t.distance(this.x,this.y,e.x,e.y)<=this.radius+e.radius},e.prototype.intersectsRectangle=function(t){var e=Math.abs(this.x-t.x-t.halfWidth),r=t.halfWidth+this.radius;if(e>r)return!1;var n=Math.abs(this.y-t.y-t.halfHeight),i=t.halfHeight+this.radius;if(n>i)return!1;if(e<=t.halfWidth||n<=t.halfHeight)return!0;var o=e-t.halfWidth,s=n-t.halfHeight,h=o*o,a=s*s,u=this.radius*this.radius;return u>=h+a},e.prototype.intersectsLine=function(e){var r=this.x,n=this.y,i=(e.end.y-e.start.y)/(e.end.x-e.start.x),o=e.end.y-i*e.end.x,s=this.radius,h=this.radius,a=o+i*r,u=(r*(h*h)-i*(s*s)*(o-n)+s*h*Math.sqrt(s*s*(i*i)+h*h-a*a-n*n+2*a*n))/(s*s*(i*i)+h*h),c=(r*(h*h)-i*(s*s)*(o-n)-s*h*Math.sqrt(s*s*(i*i)+h*h-a*a-n*n+2*a*n))/(s*s*(i*i)+h*h),f=i*u+o,p=i*c+o,y=new t.Point(u,f),l=new t.Point(c,p),d=e.pointOnSegment(y.x,y.y,.01),x=e.pointOnSegment(l.x,l.y,.01);return d&&x?[y,l]:d?[y]:x?[l]:[]},e.prototype.toString=function(){return"[{Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"},e}();t.Circle=e,__reflect(e.prototype,"sharp.Circle")}(sharp||(sharp={}));var sharp;!function(t){var e=function(){function e(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.setTo(t,e,r,n)}return Object.defineProperty(e.prototype,"length",{get:function(){return this.start.distance(this.end)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){return new t.Vertices([this.start,this.end])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.start.angle(this.end)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perpSlope",{get:function(){return-((this.end.x-this.start.x)/(this.end.y-this.start.y))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return Math.min(this.start.x,this.end.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return Math.min(this.start.y,this.end.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return Math.min(this.start.x,this.end.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return Math.max(this.start.x,this.end.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return Math.min(this.start.y,this.end.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return Math.max(this.start.y,this.end.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.start.x-this.end.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.start.y-this.end.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalX",{get:function(){return Math.cos(this.angle-1.5707963267948966)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalY",{get:function(){return Math.sin(this.angle-1.5707963267948966)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalAngle",{get:function(){return math.wrap(this.angle-1.5707963267948966,-Math.PI,Math.PI)},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.start,this.end)},e.create=function(t,r,n,i){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),new e(t,r,n,i)},e.createFromAngle=function(r,n,i){return new e(r,t.circlePoint(r,i,n))},e.prototype.setTo=function(e,r,n,i){var o=__read(t.optional2Points(e,r,n,i),2),s=o[0],h=o[1];return this.start=s.clone(),this.end=h.clone(),this},e.prototype.rotate=function(t){var e=(this.start.x+this.end.x)/2,r=(this.start.y+this.end.y)/2;return this.start.rotate(e,r,t),this.end.rotate(e,r,t),this},e.prototype.rotateAround=function(t,e,r){return this.start.rotate(t,e,r),this.end.rotate(t,e,r),this},e.prototype.intersects=function(e,r){void 0===r&&(r=!0);var n=new t.Point,i=this.start,o=this.end,s=e.start,h=e.end,a=o.y-i.y,u=h.y-s.y,c=i.x-o.x,f=s.x-h.x,p=o.x*i.y-i.x*o.y,y=h.x*s.y-s.x*h.y,l=a*f-u*c;if(0===l)return!1;if(n.x=(c*y-f*p)/l,n.y=(u*p-a*y)/l,r){var d=(h.y-s.y)*(o.x-i.x)-(h.x-s.x)*(o.y-i.y),x=((h.x-s.x)*(i.y-s.y)-(h.y-s.y)*(i.x-s.x))/d,m=((o.x-i.x)*(i.y-s.y)-(o.y-i.y)*(i.x-s.x))/d;return x>=0&&1>=x&&m>=0&&1>=m?n:!1}return n},e.prototype.intersectsRectangle=function(t){if(0===this.length||t.empty)return!1;var e=this.start.x,r=this.start.y,n=this.end.x,i=this.end.y,o=t.x,s=t.y,h=t.right,a=t.bottom,u=0;if(e>=o&&h>=e&&r>=s&&a>=r||n>=o&&h>=n&&i>=s&&a>=i)return!0;if(o>e&&n>=o){if(u=r+(i-r)*(o-e)/(n-e),u>s&&a>=u)return!0}else if(e>h&&h>=n&&(u=r+(i-r)*(h-e)/(n-e),u>=s&&a>=u))return!0;if(s>r&&i>=s){if(u=e+(n-e)*(s-r)/(i-r),u>=o&&h>=u)return!0}else if(r>a&&a>=i&&(u=e+(n-e)*(a-r)/(i-r),u>=o&&h>=u))return!0;return!1},e.prototype.intersectionWithRectangle=function(e){var r,n=this,i=new t.Point,o=e.sides,s=1/0,h=null;return o.forEach(function(e){r=n.intersects(e,!0),r instanceof t.Point&&(h=n.start.distance(r),s>h&&(s=h,i.setTo(r)))}),null!=h?i:!1},e.prototype.reflect=function(t){return 2*t.normalAngle-3.141592653589793-this.angle},e.prototype.midPoint=function(){return new t.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},e.prototype.centerOn=function(t,e){var r=(this.start.x+this.end.x)/2,n=(this.start.y+this.end.y)/2,i=t-r,o=e-n;return this.start.add(i,o),this.end.add(i,o),this},e.prototype.pointOnLine=function(t,e,r){return void 0===r&&(r=1e-4),math.fuzzyEquals((t-this.start.x)*(this.end.y-this.start.y),(this.end.x-this.start.x)*(e-this.start.y),r)},e.prototype.pointOnSegment=function(t,e,r){void 0===r&&(r=1e-4);var n=Math.min(this.start.x,this.end.x),i=Math.max(this.start.x,this.end.x),o=Math.min(this.start.y,this.end.y),s=Math.max(this.start.y,this.end.y);return this.pointOnLine(t,e,r)&&t>=n&&i>=t&&e>=o&&s>=e},e.prototype.random=function(){var e=Math.random();return new t.Point(this.start.x+e*(this.end.x-this.start.x),this.start.y+e*(this.end.y-this.start.y))},e.prototype.coordinatesOnLine=function(e){void 0===e&&(e=1);var r=[],n=Math.round(this.start.x),i=Math.round(this.start.y),o=Math.round(this.end.x),s=Math.round(this.end.y),h=Math.abs(o-n),a=Math.abs(s-i),u=o>n?1:-1,c=s>i?1:-1,f=h-a;r.push(new t.Point(n,i));for(var p=1;n!==o||i!==s;){var y=f<<1;y>-a&&(f-=a,n+=u),h>y&&(f+=h,i+=c),p%e===0&&r.push(new t.Point(n,i)),p++}return r},e}();t.Line=e,__reflect(e.prototype,"sharp.Line")}(sharp||(sharp={}));var object;!function(t){function e(t){var e=[];if(Object.keys){for(var r=Object.keys(t),n=0;n<r.length;n++)e.push(t[r[n]]);return e}for(var i in t)e.push(t[i]);return e}t.values=e}(object||(object={}));var sharp;!function(t){var e=function(){function e(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.setTo(t,e,r)}return Object.defineProperty(e.prototype,"x",{get:function(){return this.start.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.start.y},enumerable:!0,configurable:!0}),e.prototype.setTo=function(e,r,n){if(e instanceof t.Point)this.start=e.clone(),this.angle=r;else{if(this.start=t.Point.create(e,r),void 0==n)throw new Error("parameter#2 angle must be a radian.");this.angle=n}return this},e.create=function(t,r,n){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),new e(t,r,n)
},e.prototype.intersectsLine=function(t){if(t.pointOnLine(this.start.x,this.start.y))return this.start;var e=this.virtualLineToLine(t);return e.intersects(t,!0)},e.prototype.reflectLine=function(r){var n=this.intersectsLine(r);if(!(n instanceof t.Point))return!1;var i=t.Line.create(this.start,n);return new e(n,i.reflect(r))},e.prototype.intersectsRectangle=function(t){var e=this,r=t.sides,n=[];return r.forEach(function(t){var r=e.intersectsLine(t);r!==!1&&n.push(r)}),n.sort(function(t,r){return t.distance(e.start)-r.distance(e.start)})},e.prototype.intersectsCircle=function(e){var r=this.virtualLineToLength(t.distance(this.start,e.centerPoint)+e.radius);return e.intersectsLine(r)},e.prototype.virtualLineToLine=function(e){return this.virtualLineToLength(Math.max(t.distance(this.start,e.start),t.distance(this.start,e.end)))},e.prototype.virtualLineToPoint=function(e){return this.virtualLineToLength(t.distance(e,this.start))},e.prototype.virtualLineToLength=function(e){return t.Line.createFromAngle(this.start,this.angle,e)},e}();t.Ray=e,__reflect(e.prototype,"sharp.Ray")}(sharp||(sharp={}));var sharp;!function(t){var e=function(){function e(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.setTo(t,e,r,n)}return Object.defineProperty(e.prototype,"vertices",{get:function(){return new t.Vertices("L 0 0 L "+this.width+" 0 L "+this.width+" "+this.height+" L 0 "+this.height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},set:function(t){t>=this.bottom?(this.height=0,this.y=t):this.height=this.bottom-t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new t.Point(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new t.Point(this.right,this.y)},set:function(t){this.right=t.x,this.y=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new t.Point(this.x,this.bottom)},set:function(t){this.x=t.x,this.bottom=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new t.Point(this.right,this.bottom)},set:function(t){this.right=t.x,this.bottom=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(t){this.x=t-this.halfWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(t){this.y=t-this.halfHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerPoint",{get:function(){return new t.Point(this.centerX,this.centerY)},set:function(t){this.centerX=t.x,this.centerY=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(t){t&&this.setTo(0,0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edges",{get:function(){return[this.topLeft,this.topRight,this.bottomRight,this.bottomLeft]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sides",{get:function(){return[new t.Line(this.topLeft,this.topRight),new t.Line(this.topRight,this.bottomRight),new t.Line(this.bottomRight,this.bottomLeft),new t.Line(this.bottomLeft,this.topLeft)]},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.create=function(t,r,n,i){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=0),new e(t,r,n,i)},e.createFromBounds=function(t){return new e(t.x,t.y,t.width,t.height)},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.setTo=function(t,e,r,n){return this.x=t,this.y=e,this.width=r,this.height=n,this},e.prototype.isEmpty=function(){return this.empty},e.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},e.prototype.offsetPoint=function(t){return this.offset(t.x,t.y)},e.prototype.scale=function(t,e){return void 0==e&&(e=t),this.width*=t,this.height*=e,this},e.prototype.centerOn=function(t,e){return this.centerX=t,this.centerY=e,this},e.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},e.prototype.floorAll=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},e.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},e.prototype.ceilAll=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},e.prototype.copyFrom=function(t){return this.setTo(t.x,t.y,t.width,t.height)},e.prototype.copyFromBounds=function(t){return this.setTo(t.left,t.top,t.width,t.height)},e.prototype.inflate=function(e,r){var n;if(e instanceof t.Point)n=e.x,r=e.y;else if(n=e,void 0==r)throw new Error('parameter#1 "dy" must be a number');return this.x-=n,this.width+=2*n,this.y-=r,this.height+=2*r,this},e.prototype.size=function(){return new t.Point(this.width,this.height)},e.prototype.resize=function(t,e){return this.width=t,this.height=e,this},e.prototype.contains=function(e,r){var n;if(e instanceof t.Point)n=e.x,r=e.y;else if(n=e,void 0==r)throw new Error('parameter#1 "y" must be a number');return this.width<=0||this.height<=0?!1:n>=this.x&&n<this.right&&r>=this.y&&r<this.bottom},e.prototype.containsRect=function(t){return this.volume>t.volume?!1:this.x>=t.x&&this.y>=t.y&&this.right<t.right&&this.bottom<t.bottom},e.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},e.prototype.sameDimensions=function(t){return this.width===t.width&&this.height===t.height},e.prototype.intersection=function(t){var r=new e;return this.intersects(t)&&(r.x=Math.max(this.x,t.x),r.y=Math.max(this.y,t.y),r.width=Math.min(this.right,t.right)-r.x,r.height=Math.min(this.bottom,t.bottom)-r.y),r},e.prototype.intersects=function(t){return this.width<=0||this.height<=0||t.width<=0||t.height<=0?!1:!(this.right<t.x||this.bottom<t.y||this.x>t.right||this.y>t.bottom)},e.prototype.intersectsRaw=function(t,e,r,n,i){return void 0===i&&(i=0),!(t>this.right+i||e<this.left-i||r>this.bottom+i||n<this.top-i)},e.prototype.union=function(t){var r=new e;return r.setTo(Math.min(this.x,t.x),Math.min(this.y,t.y),Math.max(this.right,t.right)-Math.min(this.left,t.left),Math.max(this.bottom,t.bottom)-Math.min(this.top,t.top))},e.prototype.random=function(){return new t.Point(this.randomX,this.randomY)},e.prototype.getPoint=function(e){var r=new t.Point;switch(e){default:case t.POSITION.TOP_LEFT:return r.setTo(this.x,this.y);case t.POSITION.TOP_CENTER:return r.setTo(this.centerX,this.y);case t.POSITION.TOP_RIGHT:return r.setTo(this.right,this.y);case t.POSITION.LEFT_CENTER:return r.setTo(this.x,this.centerY);case t.POSITION.CENTER:return r.setTo(this.centerX,this.centerY);case t.POSITION.RIGHT_CENTER:return r.setTo(this.right,this.centerY);case t.POSITION.BOTTOM_LEFT:return r.setTo(this.x,this.bottom);case t.POSITION.BOTTOM_CENTER:return r.setTo(this.centerX,this.bottom);case t.POSITION.BOTTOM_RIGHT:return r.setTo(this.right,this.bottom)}},e.prototype.toString=function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"},e.aabb=function(t){var r=new e,n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return t.forEach(function(t){t.x>n&&(n=t.x),t.x<i&&(i=t.x),t.y>o&&(o=t.y),t.y<s&&(s=t.y)}),r.setTo(i,s,n-i,o-s),r},e}();t.Rectangle=e,__reflect(e.prototype,"sharp.Rectangle")}(sharp||(sharp={}));var sharp;!function(t){function e(e){return e*t.DEG_TO_RAD}function r(e){return e*t.RAD_TO_DEG}function n(t){return t*Math.PI/180}function i(t){return 180*t/Math.PI}function o(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function s(t,e){var r=o(t,e);return 360*(r>0?r:2*Math.PI+r)/(2*Math.PI)}function h(t,e,r){if(void 0===r&&(r=4),4!=r&&8!=r)throw new Error("directCount must be 4 / 8");for(var n=s(t,e),i=360/r,o=te.E,h=8/r,a=0,u=0;360>a;a+=i/2,u++)if(u%2&&(o=(o+h)%8),n>=a&&a+i/2>n)return o;return o}function a(t,e){var r=h(t,e,4);return r/2}function u(e,r,n,i){if(e instanceof t.Point!=r instanceof t.Point)throw new Error("parameter#0 type must same to parameter#1");var o,s;return e instanceof t.Point?(o=e,s=r):(o=new t.Point(e,r),s=new t.Point(n,i)),[o,s]}function c(t,e,r,n){var i=__read(u(t,e,r,n),2),o=i[0],s=i[1];return Math.pow(Math.pow(Math.abs(s.x-o.x),2)+Math.pow(Math.abs(s.y-o.y),2),.5)}function f(t,e,r,n){var i=__read(u(t,e,r,n),2),o=i[0],s=i[1],h=o.x-s.x,a=o.y-s.y;return h*h+a*a}function p(t,e,r,n,i){return void 0===i&&(i=2),Math.sqrt(Math.pow(r-t,i)+Math.pow(n-e,i))}function y(t,e){return Math.sqrt(t*t+e*e)}function l(e,r){return r=-r,new t.Point(e.x*Math.cos(r)+e.y*Math.sin(r),-e.x*Math.sin(r)+e.y*Math.cos(r))}function d(e,r,n){return void 0===n&&(n=.05),e===r?e:(Math.abs(r-e)<=n||Math.abs(r-e)>=t.PI2-n?e=r:(Math.abs(r-e)>Math.PI&&(e>r?r+=t.PI2:r-=t.PI2),r>e?e+=n:e>r&&(e-=n)),e)}function x(t,e,r,n){return Math.atan2(n-e,r-t)}function m(t,e){var r=e-t;if(0===r)return 0;var n=Math.floor((r- -180)/360);return r-360*n}function g(t,e,r,n){return Math.atan2(r-t,n-e)}function v(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}function b(t){return P(t+Math.PI)}function w(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function P(t){return t%=2*Math.PI,t>=0?t:t+2*Math.PI}function M(t,e){return void 0===e&&(e=!1),e?math.wrap(t,-Math.PI,Math.PI):math.wrap(t,-180,180)}function T(e,r,n){return new t.Point(e.x+Math.cos(n)*r,e.y+Math.sin(n)*r)}function O(t,e){return t.equals(e)}function _(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i);return r>=o}function E(t,e,r){return _(r,t,e)}function I(t,e){return t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom}function R(t,e){return I(e,t)}function L(t,e){return t.right>=e.left&&t.left<=e.right&&t.bottom>=e.top&&t.top<=e.bottom}function S(t,e,r,n){var i=t.x-r.x,o=t.y-r.y,s=Math.sqrt(i*i+o*o);return e+n>=s}function N(t,e,r){var n=t.x,i=t.y;t.x<r.left?n=r.left:t.x>r.right&&(n=r.right),t.y<r.top?i=r.top:t.y>r.bottom&&(i=r.bottom);var o=t.x-n,s=t.y-i,h=Math.sqrt(o*o+s*s);return e>=h}function j(t,e,r){return N(e,r,t)}function H(t,e,r){var n=c(t,e),i=c(t,r),o=c(e,r),s=.1;return n+i>=o-s&&o+s>=n+i}function q(t,e,r){return H(r,t,e)}function A(e,r,n){var i=r.x-n.x,o=r.y-n.y,s=Math.sqrt(i*i+o*o),h=((e.x-r.x)*(n.x-r.x)+(e.y-r.y)*(n.y-r.y))/Math.pow(s,2),a=r.x+h*(n.x-r.x),u=r.y+h*(n.y-r.y),c=q(r,n,new t.Point(a,u));return c?new t.Point(a,u):!1}function C(t,e,r,n){var i=_(t,r,n),o=_(e,r,n);if(i||o)return!0;var s=A(r,t,e);if(s===!1)return!1;var h=s.x-r.x,a=s.y-r.y,u=Math.sqrt(h*h+a*a);return n>=u}function F(t,e,r,n){return C(r,n,t,e)}function z(e,r,n,i,o){void 0===o&&(o=!0);var s=e,h=r,a=n,u=i,c=h.y-s.y,f=u.y-a.y,p=s.x-h.x,y=a.x-u.x,l=h.x*s.y-s.x*h.y,d=u.x*a.y-a.x*u.y,x=c*y-f*p,m=new t.Point;if(0===x)return!1;if(m.x=(p*d-y*l)/x,m.y=(f*l-c*d)/x,o){var g=(u.y-a.y)*(h.x-s.x)-(u.x-a.x)*(h.y-s.y),v=((u.x-a.x)*(s.y-a.y)-(u.y-a.y)*(s.x-a.x))/g,b=((h.x-s.x)*(s.y-a.y)-(h.y-s.y)*(s.x-a.x))/g;return v>=0&&1>=v&&b>=0&&1>=b?m:!1}return m}function B(t,e,r,n){var i=z(t,e,r,n);return i!==!1}function W(e,r,n){var i=e,o=r,s=B(i,o,new t.Point(n.left,n.top),new t.Point(n.left,n.bottom)),h=B(i,o,new t.Point(n.right,n.top),new t.Point(n.right,n.bottom)),a=B(i,o,new t.Point(n.left,n.top),new t.Point(n.right,n.top)),u=B(i,o,new t.Point(n.left,n.bottom),new t.Point(n.right,n.bottom));return s||h||a||u}function D(t,e,r){return W(e,r,t)}function G(t,e){for(var r=!1,n=0,i=0;i<e.length;i++){n=i+1,n==e.length&&(n=0);var o=e[i],s=e[n];(o.y>t.y&&s.y<t.y||o.y<t.y&&s.y>t.y)&&t.x<(s.x-o.x)*(t.y-o.y)/(s.y-o.y)+o.x&&(r=!r)}return r}function Y(t,e){return G(e,t)}function X(t,e,r){for(var n=0,i=0;i<r.length;i++){n=i+1,n==r.length&&(n=0);var o=r[i],s=r[n],h=C(o,s,t,e);if(h)return!0}return!1}function U(t,e,r){return X(e,r,t)}function V(t,e){for(var r=0,n=0;n<e.length;n++){r=n+1,r==e.length&&(r=0);var i=e[n],o=e[r],s=W(i,o,t);if(s)return!0;var h=Y(e,t.topLeft);if(h)return!0}return!1}function k(t,e){return V(e,t)}function Q(t,e,r){for(var n=0,i=0;i<r.length;i++){n=i+1,n==r.length&&(n=0);var o=r[i],s=r[n],h=B(t,e,o,s);if(h)return!0}return!1}function K(t,e,r){return Q(e,r,t)}function Z(t,e){for(var r=0,n=0;n<t.length;n++){r=n+1,r==t.length&&(r=0);var i=t[n],o=t[r],s=K(e,i,o);if(s)return!0;if(s=Y(t,e[0]))return!0}return!1}function J(t,e){var r=e[1].x,n=e[2].x,i=e[3].x,o=e[1].y,s=e[2].y,h=e[3].y,a=Math.abs((n-r)*(h-o)-(i-r)*(s-o)),u=Math.abs((r-t.x)*(s-t.y)-(n-t.x)*(o-t.y)),c=Math.abs((n-t.x)*(h-t.y)-(i-t.x)*(s-t.y)),f=Math.abs((i-t.x)*(o-t.y)-(r-t.x)*(h-t.y));return u+c+f==a}function $(t,e){return J(e,t)}var te;!function(t){t[t.N=0]="N",t[t.NE=1]="NE",t[t.E=2]="E",t[t.SE=3]="SE",t[t.S=4]="S",t[t.SW=5]="SW",t[t.W=6]="W",t[t.NW=7]="NW",t[t.North=0]="North",t[t.Northeast=1]="Northeast",t[t.East=2]="East",t[t.Southeast=3]="Southeast",t[t.South=4]="South",t[t.Southwest=5]="Southwest",t[t.West=6]="West",t[t.Nothwest=7]="Nothwest",t[t.NORTH=0]="NORTH",t[t.NORTHEAST=1]="NORTHEAST",t[t.EAST=2]="EAST",t[t.SOUTHEAST=3]="SOUTHEAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTHWEST=5]="SOUTHWEST",t[t.WEST=6]="WEST",t[t.NOTHWEST=7]="NOTHWEST"}(te=t.DIRECTION||(t.DIRECTION={}));var ee;!function(t){t[t.TOP=0]="TOP",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.LEFT=3]="LEFT",t[t.Top=0]="Top",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left",t[t.UP=0]="UP",t[t.FORWARD=1]="FORWARD",t[t.DOWN=2]="DOWN",t[t.BACKWARD=3]="BACKWARD",t[t.Up=0]="Up",t[t.Forward=1]="Forward",t[t.Down=2]="Down",t[t.Backward=3]="Backward",t[t.TOP_LEFT=4]="TOP_LEFT",t[t.TOP_CENTER=5]="TOP_CENTER",t[t.TOP_RIGHT=6]="TOP_RIGHT",t[t.LEFT_CENTER=7]="LEFT_CENTER",t[t.CENTER=8]="CENTER",t[t.RIGHT_CENTER=9]="RIGHT_CENTER",t[t.BOTTOM_LEFT=10]="BOTTOM_LEFT",t[t.BOTTOM_CENTER=11]="BOTTOM_CENTER",t[t.BOTTOM_RIGHT=12]="BOTTOM_RIGHT"}(ee=t.POSITION||(t.POSITION={})),t.PI2=2*Math.PI,t.HALF_PI=.5*Math.PI,t.DEG_TO_RAD=Math.PI/180,t.RAD_TO_DEG=180/Math.PI,t.degToRad=e,t.radToDeg=r,t.d2r=n,t.r2d=i,t.slope=o,t.slopeDegree=s,t.direction=h,t.position=a,t.optional2Points=u,t.distance=c,t.distanceSq=f,t.distancePow=p,t.hypot=y,t.rotatedPoint=l,t.rotateToAngle=d,t.angleBetween=x,t.getShortestAngle=m,t.angleBetweenY=g,t.angleBetweenPointsY=v,t.reverseAngle=b,t.angleBetweenPoints=w,t.normalizeAngle=P,t.wrapAngle=M,t.circlePoint=T,t.pointHitPoint=O,t.pointHitCircle=_,t.circleHitPoint=E,t.pointHitRect=I,t.rectHitPoint=R,t.rectHitRect=L,t.circleHitCircle=S,t.circleHitRect=N,t.rectHitCircle=j,t.pointHitLine=H,t.lineHitPoint=q,t.pointLineClosest=A,t.lineHitCircle=C,t.circleHitLine=F,t.lineLineIntersection=z,t.lineHitLine=B,t.lineHitRect=W,t.rectHitLine=D,t.pointHitPolygon=G,t.polygonHitPoint=Y,t.circleHitPolygon=X,t.polygonHitCircle=U,t.rectHitPolygon=V,t.polygonHitRect=k,t.lineHitPolygon=Q,t.polygonHitLine=K,t.polygonHitPolygon=Z,t.pointHitTriangle=J,t.triangleHitPoint=$}(sharp||(sharp={}));var array;!function(t){var e=function(){function t(t,e){this.rows=t,this.cols=e}return Object.defineProperty(t.prototype,"size",{get:function(){return this.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.cols*this.rows},enumerable:!0,configurable:!0}),t.prototype.row=function(t){return~~(t/this.cols)},t.prototype.col=function(t){return t%this.cols},t.prototype.index=function(t,e){return t*this.cols+e},t.prototype.indices=function(){return _.range(0,this.size)},t.prototype.rowIndices=function(t){var e=[];try{for(var r=__values(this.colsEntries()),n=r.next();!n.done;n=r.next()){var i=n.value;e.push(this.index(t,i))}}catch(o){s={error:o}}finally{try{n&&!n.done&&(h=r["return"])&&h.call(r)}finally{if(s)throw s.error}}return e;var s,h},t.prototype.colIndices=function(t){var e=[];try{for(var r=__values(this.rowsEntries()),n=r.next();!n.done;n=r.next()){var i=n.value;e.push(this.index(i,t))}}catch(o){s={error:o}}finally{try{n&&!n.done&&(h=r["return"])&&h.call(r)}finally{if(s)throw s.error}}return e;var s,h},t.prototype.crossIndices=function(t,e){var r=t;null==e&&(r=this.row(t),e=this.col(t));var n=[].concat(this.rowIndices(r),this.colIndices(e));return _.uniq(n)},t.prototype.rowsEntries=function(t){return void 0===t&&(t=1),__generator(this,function(e){switch(e.label){case 0:return[5,__values(t>0?_.range(0,this.rows,Math.abs(t)):_.rangeRight(0,this.rows,Math.abs(t)))];case 1:return e.sent(),[2]}})},t.prototype.colsEntries=function(t){return void 0===t&&(t=1),__generator(this,function(e){switch(e.label){case 0:return[5,__values(t>0?_.range(0,this.cols,Math.abs(t)):_.rangeRight(0,this.cols,Math.abs(t)))];case 1:return e.sent(),[2]}})},t.prototype.indicesEntries=function(t){return void 0===t&&(t=1),__generator(this,function(e){switch(e.label){case 0:return[5,__values(t>0?_.range(0,this.size,Math.abs(t)):_.rangeRight(0,this.size,Math.abs(t)))];case 1:return e.sent(),[2]}})},t}();t.Grid=e,__reflect(e.prototype,"array.Grid")}(array||(array={}));