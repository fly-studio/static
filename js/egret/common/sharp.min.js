var Sharp;!function(t){var n={};n.slope=function(t,n){return Math.atan2(n.y-n.y,n.x-t.x)},n.distance=function(t,n){return Math.pow(Math.pow(Math.abs(n.x-t.x),2)+Math.pow(Math.abs(n.y-t.y),2),.5)},n.distance3D=function(t,n){return Math.pow(Math.pow(Math.abs(n.x-t.x),2)+Math.pow(Math.abs(n.y-t.y),2)+Math.pow(Math.abs(n.z-t.z),2),.5)},n.rotatedPoint=function(t,n){return new egret.Point(t.x*Math.cos(n)+t.y*Math.sin(n),-t.x*Math.sin(n)+t.y*Math.cos(n))},n.d2r=function(t){return t*Math.PI/180},n.r2d=function(t){return 180*t/Math.PI},n.pointHitPoint=function(t,n){return t.equals(n)},n.pointHitCircle=function(t,n,i){var e=t.x-n.x,r=t.y-n.y,o=Math.sqrt(e*e+r*r);return i>=o},n.circleHitPoint=function(t,i,e){return n.pointHitCircle(e,t,i)},n.pointHitRect=function(t,n){return t.x>=n.left&&t.x<=n.right&&t.y>=n.top&&t.y<=n.bottom},n.rectHitPoint=function(t,i){return n.pointHitRect(i,t)},n.rectHitRect=function(t,n){return t.right>=n.left&&t.left<=n.right&&t.bottom>=n.top&&t.top<=n.bottom},n.circleHitCircle=function(t,n,i,e){var r=t.x-i.x,o=t.y-i.y,y=Math.sqrt(r*r+o*o);return n+e>=y},n.circleHitRect=function(t,n,i){var e=t.x,r=t.y;t.x<i.left?e=i.left:t.x>i.right&&(e=i.right),t.y<i.top?r=i.top:t.y>i.bottom&&(r=i.bottom);var o=t.x-e,y=t.y-r,c=Math.sqrt(o*o+y*y);return n>=c},n.rectHitCircle=function(t,i,e){return n.circleHitRect(i,e,t)},n.pointHitLine=function(t,i,e){var r=n.distance(t,i),o=n.distance(t,e),y=n.distance(i,e),c=.1;return r+o>=y-c&&y+c>=r+o},n.lineHitPoint=function(t,i,e){return n.pointHitLine(e,t,i)},n.pointLineClosest=function(t,i,e){var r=i.x-e.x,o=i.y-e.y,y=Math.sqrt(r*r+o*o),c=((t.x-i.x)*(e.x-i.x)+(t.y-i.y)*(e.y-i.y))/Math.pow(y,2),a=i.x+c*(e.x-i.x),u=i.y+c*(e.y-i.y),l=n.lineHitPoint(i,e,new egret.Point(a,u));return l?new egret.Point(a,u):!1},n.lineHitCircle=function(t,i,e,r){var o=n.pointHitCircle(t,e,r),y=n.pointHitCircle(i,e,r);if(o||y)return!0;var c=n.pointLineClosest(e,t,i);if(c===!1)return!1;distX=c.x-e.x,distY=c.y-e.y;var a=Math.sqrt(distX*distX+distY*distY);return r>=a},n.circleHitLine=function(t,i,e,r){return n.lineHitCircle(e,r,t,i)},n.lineLineIntersect=function(t,n,i,e){var r=t,o=n,y=i,c=e,a=((c.x-y.x)*(r.y-y.y)-(c.y-y.y)*(r.x-y.x))/((c.y-y.y)*(o.x-r.x)-(c.x-y.x)*(o.y-r.y)),u=((o.x-r.x)*(r.y-y.y)-(o.y-r.y)*(r.x-y.x))/((c.y-y.y)*(o.x-r.x)-(c.x-y.x)*(o.y-r.y));if(a>=0&&1>=a&&u>=0&&1>=u){var l=r.x+a*(o.x-r.x),f=r.y+a*(o.y-r.y);return new egret.Point(l,f)}return!1},n.lineHitLine=function(t,i,e,r){var o=n.lineLineIntersect(t,i,e,r);return o!==!1},n.lineHitRect=function(t,i,e){var r=t,o=i,y=n.lineHitLine(r,o,new egret.Point(e.left,e.top),new egret.Point(e.left,e.bottom)),c=n.lineHitLine(r,o,new egret.Point(e.right,e.top),new egret.Point(e.right,e.bottom)),a=n.lineHitLine(r,o,new egret.Point(e.left,e.top),new egret.Point(e.right,e.top)),u=n.lineHitLine(r,o,new egret.Point(e.left,e.bottom),new egret.Point(e.right,e.bottom));return y||c||a||u},n.rectHitLine=function(t,i,e){return n.lineHitRect(i,e,t)},n.pointHitPolygon=function(t,n){for(var i=!1,e=0,r=0;r<n.length;r++){e=r+1,e==n.length&&(e=0);var o=n[r],y=n[e];(o.y>t.y&&y.y<t.y||o.y<t.y&&y.y>t.y)&&t.x<(y.x-o.x)*(t.y-o.y)/(y.y-o.y)+o.x&&(i=!i)}return i},n.polygonHitPoint=function(t,i){return n.pointHitPolygon(i,t)},n.circleHitPolygon=function(t,i,e){for(var r=0,o=0;o<e.length;o++){r=o+1,r==e.length&&(r=0);var y=e[o],c=e[r],a=n.lineHitCircle(y,c,t,i);if(a)return!0}return!1},n.polygonHitCircle=function(t,i,e){return n.circleHitPolygon(i,e,t)},n.rectHitPolygon=function(t,i){for(var e=0,r=0;r<i.length;r++){e=r+1,e==i.length&&(e=0);var o=i[r],y=i[e],c=n.lineHitRect(o,y,t);if(c)return!0;var a=n.polygonHitPoint(i,t.topLeft);if(a)return!0}return!1},n.polygonHitRect=function(t,i){return n.rectHitPolygon(i,t)},n.lineHitPolygon=function(t,i,e){for(var r=0,o=0;o<e.length;o++){r=o+1,r==e.length&&(r=0);var y=e[o],c=e[r],a=n.lineHitLine(t,i,y,c);if(a)return!0}return!1},n.polygonHitLine=function(t,i,e){return n.lineHitPolygon(i,e,t)},n.polygonHitPolygon=function(t,i){for(var e=0,r=0;r<t.length;r++){e=r+1,e==t.length&&(e=0);var o=t[r],y=t[e],c=n.polygonHitLine(i,o,y);if(c)return!0;if(c=n.polygonHitPoint(t,i[0]))return!0}return!1},n.pointHitTriangle=function(t,n){var i=n[1].x,e=n[2].x,r=n[3].x,o=n[1].y,y=n[2].y,c=n[3].y,a=Math.abs((e-i)*(c-o)-(r-i)*(y-o)),u=Math.abs((i-t.x)*(y-t.y)-(e-t.x)*(o-t.y)),l=Math.abs((e-t.x)*(c-t.y)-(r-t.x)*(y-t.y)),f=Math.abs((r-t.x)*(o-t.y)-(i-t.x)*(c-t.y));return u+l+f==a},n.triangleHitPoint=function(t,i){return n.pointHitTriangle(i,t)};for(var i in n)t[i]=n[i],egret.registerClass(n[i],"Sharp."+i)}(Sharp||(Sharp={}));