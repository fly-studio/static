var LoadingUI=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var o=(__define,t),r=o.prototype;return r.onAddToStage=function(e){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=(this.stage.stageHeight-100)/2,this.textField.width=this.stage.stageWidth,this.textField.height=100,this.textField.textAlign="center"},r.setProgress=function(e,t){var o=t>0?e/t*100:0;o>100&&(o=100),this.textField.text="Loading..."+parseInt(o)+"%"},r.loadConfig=function(e,t,o){var r=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,r,this),t&&t.call(o?o:this,e)};RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,r,this),RES.addEventListener(RES.ResourceEvent.CONFIG_LOAD_ERROR,this.onConfigLoadErr,this);for(var n=0;n<e.length;n++)RES.loadConfig(e[n],e[n].replace(/\\/g,"/").replace(/\/[^\/]*\/?$/,"")+"/")},r.onConfigLoadErr=function(e){},r.loadGroup=function(e,t,o){var r=function(n){n.groupName==e&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,r,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),t&&t.call(o?o:this,n,e))};RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,r,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(e)},r.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},r.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),RES.ResourceEvent.dispatchResourceEvent(e.target,RES.ResourceEvent.GROUP_COMPLETE,e.groupName)},r.onResourceProgress=function(e){this.setProgress(e.itemsLoaded,e.itemsTotal)},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");