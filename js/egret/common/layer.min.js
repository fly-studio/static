var layer;!function(t){var e={};e.bitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.autoTips=function(t,i){var n=function(t){return t.replace(/<script[^>]*?>.*?<\/script>/gi,"").replace(/<[\/\!]*?[^<>]*?>/g,"").replace(/<style[^>]*?>.*?<\/style>/gi,"").replace(/<![\s\S]*?--[ \t\n\r]*>/,"").replace(/([\r\n])[\s]+/,"").replace(/&(quot|#34|amp|#38|lt|#60|gt|#62|nbsp|#160)/i,"")},r=[];return i=i?i:this,0==t.url?r=[{text:"返回",onClick:function(t,e){e.parent&&e.parent.removeChild(e)}}]:t.url!==!0&&(r=[{text:"(跳转链接)",onClick:function(e,i){location.href=t.url}}]),e.tips.call(i,{title:n(t.message.title),content:n(t.message.content),buttons:r,timeout:t.url===!0?1500:0})},e.alert=function(t,i,n){return n=n?n:this,e.tips.call(n,{title:"提示",content:t,buttons:[{text:"OK",onClick:function(t,e){e.parent&&e.parent.removeChild(e),i&&i.call(n)}}],timeout:0})},e.confirm=function(t,i,n,r){return r=r?r:this,e.tips.call(r,{title:"提示",content:t,buttons:[{text:"取消",onClick:function(t,e){e.parent&&e.parent.removeChild(e),n&&n.call(r)}},{text:"确定",onClick:function(t,e){e.parent&&e.parent.removeChild(e),i&&i.call(r)}}],timeout:0})},e.tips=function(t,e){e=e?e:this;var i="undefined"!=typeof e.stage?e.stage:egret.MainContext.instance.stage,n={textColor:t.color||0,fontFamily:t.fontFamily||"Microsoft Yahei",backgoundColor:t.color||16777215,title:t.title||"",content:t.content||"",timeout:t.buttons||"undefined"!=typeof t.timeout?0:1500,buttons:t.buttons||[],width:t.width||.75*i.stageWidth,height:t.height||.3*i.stageHeight};n.width>500&&(n.width=500);var r=new egret.Sprite;r.graphics.beginFill(0,.25),r.graphics.drawRect(0,0,i.stageWidth,i.stageHeight),r.graphics.endFill(),i.addChild(r);var o=70,a=n.buttons.length>0?75:0,l=.9*i.stageHeight-o-a,h=new egret.TextField;h.name="content",h.textColor=n.textColor,h.fontFamily=n.fontFamily,h.size=20,h.text=n.content,h.textAlign=egret.HorizontalAlign.LEFT,h.verticalAlign=egret.VerticalAlign.TOP,h.x=15,h.y=o,h.width=n.width-30,h.height<150&&(h.height=150),h.height>l&&(h.height=l),l=h.height,n.height=o+a+l;var g=new egret.Sprite;g.graphics.beginFill(n.backgoundColor,.95),g.graphics.drawRoundRect(0,0,n.width,n.height,50),g.graphics.endFill(),g.x=(i.stageWidth-n.width)/2,g.y=(i.stageHeight-n.height)/2,i.addChild(g),g.addChild(h);var s=new egret.TextField;s.name="title",s.textColor=n.textColor,s.fontFamily=n.fontFamily,s.size=35,s.text=n.title,s.textAlign=egret.HorizontalAlign.CENTER,s.verticalAlign=egret.VerticalAlign.MIDDLE,s.x=0,s.y=0,s.width=g.width,s.height=70,g.addChild(s);var c=new egret.Sprite;c.name="buttons";var d=function(t){t.stopPropagation();for(var i=0;i<c.numChildren;++i)c.getChildAt(i).hashCode==t.currentTarget.hashCode&&n.buttons[i].onClick&&n.buttons[i].onClick.call(e,t,g)};if(n.buttons.length>0){c.x=0,c.y=g.height-75,c.width=n.width,c.height=75;var u=c.width/n.buttons.length;c.graphics.lineStyle(1,13421772),c.graphics.moveTo(0,0),c.graphics.lineTo(c.width,0);for(var p=1;p<n.buttons.length;p++)c.graphics.moveTo(u*p),c.graphics.lineTo(u*p,c.height);for(var p=0;p<n.buttons.length;p++){var f=new egret.TextField,v=n.buttons[p];f.name="button-"+p,f.x=u*p,f.y=1,f.fontFamily=n.fontFamily,f.width=u,f.height=c.height,f.textColor=n.textColor,f.textAlign=egret.HorizontalAlign.CENTER,f.verticalAlign=egret.VerticalAlign.MIDDLE,f.text=v.text,f.touchEnabled=!0,f.addEventListener(egret.TouchEvent.TOUCH_TAP,d,e),c.addChild(f)}}return g.addChild(c),g.touchEnabled=!0,g.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){},e,!0,10),g.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){r.parent&&r.parent.removeChild(r)},e),n.timeout>0&&setTimeout(function(){g.parent&&g.parent.removeChild(g)},n.timeout),{setTitle:function(t){return s.text=t,this},setContent:function(t){return h.text=t,this},setButton:function(t,e,i){var r=c.getChildAt(t);if(r)return r.text=e,i&&(n.buttons[t].onClick=i),this},remove:function(){return g.parent&&g.parent.removeChild(g),this},hide:function(){return r.visible=!1,g.visible=!1,this},show:function(){return r.visible=!0,g.visible=!0,this}}},e.loading=function(t){t=t?t:this;var e="undefined"!=typeof t.stage?t.stage:egret.MainContext.instance.stage,i=.65*e.stageWidth;i>500&&(i=500);var n=new egret.Sprite;n.graphics.beginFill(0,.8),n.graphics.drawRoundRect(0,0,i,i,50),n.graphics.endFill(),n.x=(e.stageWidth-n.width)/2,n.y=(e.stageHeight-n.height)/2;var r=new egret.Sprite;n.addChild(r);var o=new egret.TextField;o.width=n.width,o.height=50,o.fontFamily="Microsoft Yahei",o.x=0,o.y=(n.height-50)/2,o.size=40,o.textColor=16777215,o.textAlign=egret.HorizontalAlign.CENTER,o.verticalAlign=egret.VerticalAlign.MIDDLE,o.text="0 %",n.addChild(o);var a=new egret.TextField;a.width=n.width,a.fontFamily="Microsoft Yahei",a.size=20,a.textColor=16777215,a.x=0,a.y=o.y+o.height+20,a.textAlign=egret.HorizontalAlign.CENTER,a.verticalAlign=egret.VerticalAlign.MIDDLE,a.text="",n.addChild(a),e.addChild(n),n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){},t,!0,10);var l=function(t){r.graphics.clear(),r.graphics.lineStyle(10,16777215),r.graphics.drawArc(n.width/2,n.height/2,.4*n.width,-90*Math.PI/180,(360*t-90)*Math.PI/180)};return{setPercent:function(t){return t>1&&(t/=100),o.text=parseInt(100*t)+" %",l(t),this},setSubText:function(t){return a.text=t,this},remove:function(){return n.parent&&n.parent.removeChild(n),this},hide:function(){return n.visible=!1,this},show:function(){return n.visible=!0,this}}};for(var i in e)t[i]=e[i],egret.registerClass(e[i],"layer."+i)}(layer||(layer={}));