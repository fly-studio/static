var layer;!function(t){var e={};e.bitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.autoTips=function(t,i){var n=[];return i=i?i:this,0==t.url?n=[{text:"返回",onClick:function(t){t.parent&&t.parent.removeChild(t)}}]:t.url!==!0&&(n=[{text:"(跳转链接)",onClick:function(e){location.href=t.url}}]),e.tips.call(i,{title:t.message.title,content:t.message.content,buttons:n,timeout:t.url===!0?1500:0})},e.alert=function(t,i,n){return n=n?n:this,e.tips.call(n,{title:"提示",content:t,buttons:[{text:"OK",onClick:function(t,e){e.parent&&e.parent.removeChild(e),i&&i.call(n)}}],timeout:0})},e.confirm=function(t,i,n,r){return r=r?r:this,e.tips.call(r,{title:"提示",content:t,buttons:[{text:"取消",onClick:function(t,e){e.parent&&e.parent.removeChild(e),n&&n.call(r)}},{text:"确定",onClick:function(t,e){e.parent&&e.parent.removeChild(e),i&&i.call(r)}}],timeout:0})},e.tips=function(t,e){e=e?e:this;var i={textColor:t.color||0,fontFamily:t.fontFamily||"Microsoft Yahei",backgoundColor:t.color||16777215,title:t.title||"",content:t.content||"",timeout:t.buttons||"undefined"!=typeof t.timeout?0:1500,buttons:t.buttons||[],width:t.width||.75*e.stage.stageWidth,height:t.height||.3*e.stage.stageHeight};i.width>500&&(i.width=500);var n=new egret.Sprite;n.graphics.beginFill(0,.25),n.graphics.drawRect(0,0,e.stage.stageWidth,e.stage.stageHeight),n.graphics.endFill(),e.stage.addChild(n);var r=70,o=i.buttons.length>0?75:0,a=.9*e.stage.stageHeight-r-o,l=new egret.TextField;l.name="content",l.textColor=i.textColor,l.fontFamily=i.fontFamily,l.size=20,l.text=i.content,l.textAlign=egret.HorizontalAlign.LEFT,l.verticalAlign=egret.VerticalAlign.TOP,l.x=15,l.y=r,l.width=i.width-30,l.height<150&&(l.height=150),l.height>a&&(l.height=a),a=l.height,i.height=r+o+a;var h=new egret.Sprite;h.graphics.beginFill(i.backgoundColor,.95),h.graphics.drawRoundRect(0,0,i.width,i.height,50),h.graphics.endFill(),h.x=(e.stage.stageWidth-i.width)/2,h.y=(e.stage.stageHeight-i.height)/2,e.stage.addChild(h),h.addChild(l);var g=new egret.TextField;g.name="title",g.textColor=i.textColor,g.fontFamily=i.fontFamily,g.size=35,g.text=i.title,g.textAlign=egret.HorizontalAlign.CENTER,g.verticalAlign=egret.VerticalAlign.MIDDLE,g.x=0,g.y=0,g.width=h.width,g.height=70,h.addChild(g);var s=new egret.Sprite;s.name="buttons";var d=function(t){t.stopPropagation();for(var n=0;n<s.numChildren;++n)s.getChildAt(n).hashCode==t.currentTarget.hashCode&&i.buttons[n].onClick&&i.buttons[n].onClick.call(e,t,h)};if(i.buttons.length>0){s.x=0,s.y=h.height-75,s.width=i.width,s.height=75;var c=s.width/i.buttons.length;s.graphics.lineStyle(1,13421772),s.graphics.moveTo(0,0),s.graphics.lineTo(s.width,0);for(var u=1;u<i.buttons.length;u++)s.graphics.moveTo(c*u),s.graphics.lineTo(c*u,s.height);for(var u=0;u<i.buttons.length;u++){var v=new egret.TextField,f=i.buttons[u];v.name="button-"+u,v.x=c*u,v.y=1,v.fontFamily=i.fontFamily,v.width=c,v.height=s.height,v.textColor=i.textColor,v.textAlign=egret.HorizontalAlign.CENTER,v.verticalAlign=egret.VerticalAlign.MIDDLE,v.text=f.text,v.touchEnabled=!0,v.addEventListener(egret.TouchEvent.TOUCH_TAP,d,e),s.addChild(v)}}return h.addChild(s),h.touchEnabled=!0,h.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){},e,!0,10),h.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){n.parent&&n.parent.removeChild(n)},e),i.timeout>0&&setTimeout(function(){h.parent&&h.parent.removeChild(h)},i.timeout),{setTitle:function(t){return g.text=t,this},setContent:function(t){return l.text=t,this},setButton:function(t,e,n){var r=s.getChildAt(t);if(r)return r.text=e,n&&(i.buttons[t].onClick=n),this},remove:function(){return h.parent&&h.parent.removeChild(h),this},hide:function(){return n.visible=!1,h.visible=!1,this},show:function(){return n.visible=!0,h.visible=!0,this}}},e.loading=function(t){t=t?t:this;var e=.65*t.stage.stageWidth;e>500&&(e=500);var i=new egret.Sprite;i.graphics.beginFill(0,.8),i.graphics.drawRoundRect(0,0,e,e,50),i.graphics.endFill(),i.x=(t.stage.stageWidth-i.width)/2,i.y=(t.stage.stageHeight-i.height)/2;var n=new egret.Sprite;i.addChild(n);var r=new egret.TextField;r.width=i.width,r.height=50,r.fontFamily="Microsoft Yahei",r.x=0,r.y=(i.height-50)/2,r.size=40,r.textColor=16777215,r.textAlign=egret.HorizontalAlign.CENTER,r.verticalAlign=egret.VerticalAlign.MIDDLE,r.text="0 %",i.addChild(r);var o=new egret.TextField;o.width=i.width,o.fontFamily="Microsoft Yahei",o.size=20,o.textColor=16777215,o.x=0,o.y=r.y+r.height+20,o.textAlign=egret.HorizontalAlign.CENTER,o.verticalAlign=egret.VerticalAlign.MIDDLE,o.text="",i.addChild(o),t.stage.addChild(i),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){},t,!0,10);var a=function(t){n.graphics.clear(),n.graphics.lineStyle(10,16777215),n.graphics.drawArc(i.width/2,i.height/2,.4*i.width,-90*Math.PI/180,(360*t-90)*Math.PI/180)};return{setPercent:function(t){return t>1&&(t/=100),r.text=parseInt(100*t)+" %",a(t),this},setSubText:function(t){return o.text=t,this},remove:function(){return i.parent&&i.parent.removeChild(i),this},hide:function(){return i.visible=!1,this},show:function(){return i.visible=!0,this}}};for(var i in e)t[i]=e[i],egret.registerClass(e[i],"layer."+i)}(layer||(layer={}));